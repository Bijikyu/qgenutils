291f0e1a6496480ada5ec9f08c732291
require('qtests/setup');
const qtests = require('qtests');
const winston = require('winston');
const DailyRotateFile = require('winston-daily-rotate-file');
function reload() {
  delete require.cache[require.resolve('./logger')];
  return require('./logger');
}
describe('Logger Utility', () => {
  test('verifies should configure DailyRotateFile transport', () => {
    let captured;
    const restore = qtests.stubMethod(winston, 'createLogger', cfg => {
      captured = cfg;
      return {
        transports: cfg.transports,
        debug() {},
        info() {},
        error() {}
      };
    });
    reload();
    restore();
    const hasRotate = captured.transports.some(t => t instanceof DailyRotateFile);
    expect(hasRotate).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwicXRlc3RzIiwid2luc3RvbiIsIkRhaWx5Um90YXRlRmlsZSIsInJlbG9hZCIsImNhY2hlIiwicmVzb2x2ZSIsImRlc2NyaWJlIiwidGVzdCIsImNhcHR1cmVkIiwicmVzdG9yZSIsInN0dWJNZXRob2QiLCJjZmciLCJ0cmFuc3BvcnRzIiwiZGVidWciLCJpbmZvIiwiZXJyb3IiLCJoYXNSb3RhdGUiLCJzb21lIiwidCIsImV4cGVjdCIsInRvQmUiXSwic291cmNlcyI6WyJsb2dnZXIudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJyZXF1aXJlKCdxdGVzdHMvc2V0dXAnKTtcbmNvbnN0IHF0ZXN0cyA9IHJlcXVpcmUoJ3F0ZXN0cycpO1xuY29uc3Qgd2luc3RvbiA9IHJlcXVpcmUoJ3dpbnN0b24nKTtcbmNvbnN0IERhaWx5Um90YXRlRmlsZSA9IHJlcXVpcmUoJ3dpbnN0b24tZGFpbHktcm90YXRlLWZpbGUnKTtcblxuZnVuY3Rpb24gcmVsb2FkKCkge1xuICBkZWxldGUgcmVxdWlyZS5jYWNoZVtyZXF1aXJlLnJlc29sdmUoJy4vbG9nZ2VyJyldO1xuICByZXR1cm4gcmVxdWlyZSgnLi9sb2dnZXInKTtcbn1cblxuZGVzY3JpYmUoJ0xvZ2dlciBVdGlsaXR5JywgKCkgPT4ge1xuICB0ZXN0KCd2ZXJpZmllcyBzaG91bGQgY29uZmlndXJlIERhaWx5Um90YXRlRmlsZSB0cmFuc3BvcnQnLCAoKSA9PiB7XG4gICAgbGV0IGNhcHR1cmVkO1xuICAgIGNvbnN0IHJlc3RvcmUgPSBxdGVzdHMuc3R1Yk1ldGhvZCh3aW5zdG9uLCAnY3JlYXRlTG9nZ2VyJywgY2ZnID0+IHtcbiAgICAgIGNhcHR1cmVkID0gY2ZnO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHJhbnNwb3J0czogY2ZnLnRyYW5zcG9ydHMsXG4gICAgICAgIGRlYnVnKCkge30sXG4gICAgICAgIGluZm8oKSB7fSxcbiAgICAgICAgZXJyb3IoKSB7fVxuICAgICAgfTtcbiAgICB9KTtcbiAgICByZWxvYWQoKTtcbiAgICByZXN0b3JlKCk7XG4gICAgY29uc3QgaGFzUm90YXRlID0gY2FwdHVyZWQudHJhbnNwb3J0cy5zb21lKHQgPT4gdCBpbnN0YW5jZW9mIERhaWx5Um90YXRlRmlsZSk7XG4gICAgZXhwZWN0KGhhc1JvdGF0ZSkudG9CZSh0cnVlKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBQyxjQUFjLENBQUM7QUFDdkIsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLE1BQU1FLE9BQU8sR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQyxNQUFNRyxlQUFlLEdBQUdILE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztBQUU1RCxTQUFTSSxNQUFNQSxDQUFBLEVBQUc7RUFDaEIsT0FBT0osT0FBTyxDQUFDSyxLQUFLLENBQUNMLE9BQU8sQ0FBQ00sT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0VBQ2pELE9BQU9OLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDNUI7QUFFQU8sUUFBUSxDQUFDLGdCQUFnQixFQUFFLE1BQU07RUFDL0JDLElBQUksQ0FBQyxxREFBcUQsRUFBRSxNQUFNO0lBQ2hFLElBQUlDLFFBQVE7SUFDWixNQUFNQyxPQUFPLEdBQUdULE1BQU0sQ0FBQ1UsVUFBVSxDQUFDVCxPQUFPLEVBQUUsY0FBYyxFQUFFVSxHQUFHLElBQUk7TUFDaEVILFFBQVEsR0FBR0csR0FBRztNQUNkLE9BQU87UUFDTEMsVUFBVSxFQUFFRCxHQUFHLENBQUNDLFVBQVU7UUFDMUJDLEtBQUtBLENBQUEsRUFBRyxDQUFDLENBQUM7UUFDVkMsSUFBSUEsQ0FBQSxFQUFHLENBQUMsQ0FBQztRQUNUQyxLQUFLQSxDQUFBLEVBQUcsQ0FBQztNQUNYLENBQUM7SUFDSCxDQUFDLENBQUM7SUFDRlosTUFBTSxDQUFDLENBQUM7SUFDUk0sT0FBTyxDQUFDLENBQUM7SUFDVCxNQUFNTyxTQUFTLEdBQUdSLFFBQVEsQ0FBQ0ksVUFBVSxDQUFDSyxJQUFJLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxZQUFZaEIsZUFBZSxDQUFDO0lBQzdFaUIsTUFBTSxDQUFDSCxTQUFTLENBQUMsQ0FBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQztFQUM5QixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=