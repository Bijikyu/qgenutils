6c94e61554cc69217a2f25de2f27657c
const {
  default: createHttpConfig
} = require('./createHttpConfig');
const {
  default: getContextualTimeout
} = require('./getContextualTimeout');
describe('createHttpConfig', () => {
  it('should create basic config with http-api default timeout', () => {
    const config = createHttpConfig();
    expect(config.timeout).toBe(getContextualTimeout('http-api'));
    expect(config.timeout).toBe(30000);
    expect(config.headers['Content-Type']).toBe('application/json');
    expect(config.auth).toBeUndefined();
  });
  it('should include auth when API key provided', () => {
    const config = createHttpConfig('my-api-key');
    expect(config.auth.username).toBe('anystring');
    expect(config.auth.password).toBe('my-api-key');
  });
  it('should merge additional headers', () => {
    const config = createHttpConfig(null, {
      'X-Custom': 'value'
    });
    expect(config.headers['X-Custom']).toBe('value');
    expect(config.headers['Content-Type']).toBe('application/json');
  });
  it('should use custom timeout', () => {
    const config = createHttpConfig(null, null, 60000);
    expect(config.timeout).toBe(60000);
  });
  it('should create complete config with all options', () => {
    const config = createHttpConfig('secret-key', {
      'Authorization': 'Bearer token'
    }, 30000);
    expect(config.auth.password).toBe('secret-key');
    expect(config.headers['Authorization']).toBe('Bearer token');
    expect(config.timeout).toBe(30000);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZWZhdWx0IiwiY3JlYXRlSHR0cENvbmZpZyIsInJlcXVpcmUiLCJnZXRDb250ZXh0dWFsVGltZW91dCIsImRlc2NyaWJlIiwiaXQiLCJjb25maWciLCJleHBlY3QiLCJ0aW1lb3V0IiwidG9CZSIsImhlYWRlcnMiLCJhdXRoIiwidG9CZVVuZGVmaW5lZCIsInVzZXJuYW1lIiwicGFzc3dvcmQiXSwic291cmNlcyI6WyJjcmVhdGVIdHRwQ29uZmlnLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBkZWZhdWx0OiBjcmVhdGVIdHRwQ29uZmlnIH0gPSByZXF1aXJlKCcuL2NyZWF0ZUh0dHBDb25maWcnKTtcbmNvbnN0IHsgZGVmYXVsdDogZ2V0Q29udGV4dHVhbFRpbWVvdXQgfSA9IHJlcXVpcmUoJy4vZ2V0Q29udGV4dHVhbFRpbWVvdXQnKTtcblxuZGVzY3JpYmUoJ2NyZWF0ZUh0dHBDb25maWcnLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgY3JlYXRlIGJhc2ljIGNvbmZpZyB3aXRoIGh0dHAtYXBpIGRlZmF1bHQgdGltZW91dCcsICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBjcmVhdGVIdHRwQ29uZmlnKCk7XG4gICAgZXhwZWN0KGNvbmZpZy50aW1lb3V0KS50b0JlKGdldENvbnRleHR1YWxUaW1lb3V0KCdodHRwLWFwaScpKTtcbiAgICBleHBlY3QoY29uZmlnLnRpbWVvdXQpLnRvQmUoMzAwMDApO1xuICAgIGV4cGVjdChjb25maWcuaGVhZGVyc1snQ29udGVudC1UeXBlJ10pLnRvQmUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICBleHBlY3QoY29uZmlnLmF1dGgpLnRvQmVVbmRlZmluZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ3Nob3VsZCBpbmNsdWRlIGF1dGggd2hlbiBBUEkga2V5IHByb3ZpZGVkJywgKCkgPT4ge1xuICAgIGNvbnN0IGNvbmZpZyA9IGNyZWF0ZUh0dHBDb25maWcoJ215LWFwaS1rZXknKTtcbiAgICBleHBlY3QoY29uZmlnLmF1dGgudXNlcm5hbWUpLnRvQmUoJ2FueXN0cmluZycpO1xuICAgIGV4cGVjdChjb25maWcuYXV0aC5wYXNzd29yZCkudG9CZSgnbXktYXBpLWtleScpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG1lcmdlIGFkZGl0aW9uYWwgaGVhZGVycycsICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBjcmVhdGVIdHRwQ29uZmlnKG51bGwsIHsgJ1gtQ3VzdG9tJzogJ3ZhbHVlJyB9KTtcbiAgICBleHBlY3QoY29uZmlnLmhlYWRlcnNbJ1gtQ3VzdG9tJ10pLnRvQmUoJ3ZhbHVlJyk7XG4gICAgZXhwZWN0KGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSkudG9CZSgnYXBwbGljYXRpb24vanNvbicpO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIHVzZSBjdXN0b20gdGltZW91dCcsICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBjcmVhdGVIdHRwQ29uZmlnKG51bGwsIG51bGwsIDYwMDAwKTtcbiAgICBleHBlY3QoY29uZmlnLnRpbWVvdXQpLnRvQmUoNjAwMDApO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIGNyZWF0ZSBjb21wbGV0ZSBjb25maWcgd2l0aCBhbGwgb3B0aW9ucycsICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBjcmVhdGVIdHRwQ29uZmlnKCdzZWNyZXQta2V5JywgeyAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgdG9rZW4nIH0sIDMwMDAwKTtcbiAgICBleHBlY3QoY29uZmlnLmF1dGgucGFzc3dvcmQpLnRvQmUoJ3NlY3JldC1rZXknKTtcbiAgICBleHBlY3QoY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSkudG9CZSgnQmVhcmVyIHRva2VuJyk7XG4gICAgZXhwZWN0KGNvbmZpZy50aW1lb3V0KS50b0JlKDMwMDAwKTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTTtFQUFFQSxPQUFPLEVBQUVDO0FBQWlCLENBQUMsR0FB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