const createProcessingCapabilities=require(./createProcessingCapabilities);describe('createProcessingCapabilities',()=>{it('should build config with defaults',()=>{const config=createProcessingCapabilities();expect(config.concurrency.maxTasks).toBe(10);expect(config.concurrency.taskTimeout).toBe(30000);expect(config.concurrency.queueSize).toBe(1000);expect(config.retry.maxAttempts).toBe(3);expect(config.retry.delay).toBe(1000);expect(config.retry.backoffMultiplier).toBe(2);expect(config.retry.maxDelay).toBe(60000);expect(config.errorHandling.deadLetterQueue).toBe(true);expect(config.priorities.levels).toEqual(['low','normal','high','critical']);expect(config.priorities.defaultLevel).toBe('normal');expect(config.loadBalancing.strategy).toBe('round-robin');expect(config.loadBalancing.healthCheck).toBe(true)});it('should validate maxConcurrentTasks',()=>{expect(()=>createProcessingCapabilities({maxConcurrentTasks: 0})).toThrow('Max concurrent tasks must be positive');expect(()=>createProcessingCapabilities({maxConcurrentTasks: -5})).toThrow('Max concurrent tasks must be positive')});it('should validate taskTimeout',()=>{expect(()=>createProcessingCapabilities({taskTimeout: 0})).toThrow('Task timeout must be positive')});it('should validate queueSize',()=>{expect(()=>createProcessingCapabilities({queueSize: 0})).toThrow('Queue size must be positive')});it('should build config with custom values',()=>{const config=createProcessingCapabilities({maxConcurrentTasks: 50,taskTimeout: 60000,queueSize: 5000,retryAttempts: 5,retryDelay: 2000,retryBackoffMultiplier: 3,retryMaxDelay: 120000,deadLetterQueue: false,maxRetriesBeforeDLQ: 10,dlqSize: 500,priorityLevels: ['normal','urgent'],defaultPriority: 'urgent',priorityWeightings:{normal: 1,urgent: 5},loadBalancing: 'least-connections',loadBalancingHealthCheck: false,healthCheckInterval: 60000});expect(config.concurrency.maxTasks).toBe(50);expect(config.concurrency.taskTimeout).toBe(60000);expect(config.concurrency.queueSize).toBe(5000);expect(config.retry.maxAttempts).toBe(5);expect(config.retry.delay).toBe(2000);expect(config.retry.backoffMultiplier).toBe(3);expect(config.retry.maxDelay).toBe(120000);expect(config.errorHandling.deadLetterQueue).toBe(false);expect(config.errorHandling.maxRetriesBeforeDLQ).toBe(10);expect(config.errorHandling.dlqSize).toBe(500);expect(config.priorities.levels).toEqual(['normal','urgent']);expect(config.priorities.defaultLevel).toBe('urgent');expect(config.priorities.weightings).toEqual({normal: 1,urgent: 5});expect(config.loadBalancing.strategy).toBe('least-connections');expect(config.loadBalancing.healthCheck).toBe(false);expect(config.loadBalancing.healthCheckInterval).toBe(60000)});it('should handle string priorityLevels as array',()=>{const config=createProcessingCapabilities({priorityLevels: 'normal'});expect(config.priorities.levels).toEqual(['normal'])})});